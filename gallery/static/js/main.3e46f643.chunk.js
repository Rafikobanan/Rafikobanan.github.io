(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{18:function(e,t,a){e.exports=a(35)},23:function(e,t,a){},24:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(3),c=a.n(l),i=(a(23),a(24),a(2));a(25);var o=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},t))};a(26),a(27);var u=function(e){var t=e.className,a=void 0===t?null:t,l=e.onChange,c=void 0===l?null:l,o=e.placeholder,u=void 0===o?null:o,s=e.onKeyDown,d=void 0===s?null:s,m=e.value,f=void 0===m?null:m,g=Object(n.useState)(!1),v=Object(i.a)(g,2),E=v[0],p=v[1],h=["input-field__placeholder"];return(E||f)&&h.push("input-field__placeholder_active"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{className:"input ".concat(a),onChange:c,onKeyDown:d,onFocus:function(){p(!0)},onBlur:function(){p(!1)},value:f,type:"text"}),r.a.createElement("span",{className:h.join(" ")},u))},s=a(12),d=r.a.createContext();var m=function(){var e=Object(n.useContext)(d).dispatch,t=Object(n.useState)(""),a=Object(i.a)(t,2),l=a[0],c=a[1],o=function(e){s.b.error(e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return r.a.createElement("div",{className:"loading"},r.a.createElement(u,{className:"loading__input",placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443",onKeyDown:function(t){if("ENTER"===t.key.toUpperCase()){if(!l)return void o("\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443");c(""),e({type:"ADD_PICTURE",payload:l})}},onChange:function(e){c(e.target.value.trim())},value:l}),r.a.createElement("label",{htmlFor:"upload",className:"loading__label"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),r.a.createElement("input",{type:"file",className:"loading__upload",id:"upload",onChange:function(t){return function(t){var a=t.files[0];if(a)if("application/json"===a.type){var n=new FileReader;n.readAsText(a),n.addEventListener("load",(function(){var t=JSON.parse(n.result);if(t.galleryImages){for(var a=[],r=0;r<t.galleryImages.length;r++){var l=t.galleryImages[r];"string"===typeof l&&(l={url:t.galleryImages[r]}),a.push(l)}e({type:"ADD_SOME_PICTURES",payload:a})}else o("\u041d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 galleryImages!")})),n.addEventListener("error",(function(){o(n.error)}))}else o("\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 - JSON!")}(t.target)}}))},f=a(7),g=(a(30),a(1));a(31),a(32);var v=function(){return r.a.createElement("div",{className:"lds-dual-ring"})};var E=function(e){var t=e.className,a=void 0===t?"":t,l=e.src,c=void 0===l?null:l,o=e.style,u=void 0===o?null:o,s=e.children,d=void 0===s?null:s,m=e.onLoad,f=void 0===m?null:m,E=e.onClick,p=void 0===E?null:E,h=e.withLoader,y=void 0===h||h,_=Object(n.useState)(y),b=Object(i.a)(_,2),O=b[0],j=b[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:p,className:"image-container ".concat(a),style:Object(g.a)({cursor:"".concat(p?"pointer":"")},u)},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(c,")")}},r.a.createElement("img",{onLoad:function(e){y&&(j(!1),f&&f(e))},className:"".concat(O?"image__load":"image__hidden"),src:c,alt:""}),d,O?r.a.createElement(v,null):"")))};var p=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=t}),[t]),Object(n.useEffect)((function(){if(a&&a.addEventListener){var t=function(e){return r.current(e)};return a.addEventListener(e,t),function(){a.removeEventListener(e,t)}}}),[e,a])};var h=function(e){var t=e.onClick,a=void 0===t?null:t,n=e.className,l=void 0===n?null:n,c=e.style,i=void 0===c?null:c,o=e.icon;return r.a.createElement("div",{onClick:a},r.a.createElement("svg",{className:l,style:i},r.a.createElement("use",{xlinkHref:o})))},y=a(36),_=a(37),b=1,O=1.2,j=1.4,I=1.6,N=1.8;var C=function(){var e=Object(n.useContext)(d),t=e.state,a=e.dispatch,l=Object(n.useState)(b),c=Object(i.a)(l,2),o=c[0],u=c[1],s=Object(n.useCallback)((function(){var e=document.body.clientWidth;e>=860&&o!==b&&u(b),e<860&&e>=705&&o!==O&&u(O),e<705&&e>=550&&o!==j&&u(j),e<550&&e>=435&&o!==I&&u(I),e<435&&o!==N&&u(N)}),[o]);Object(n.useEffect)((function(){s()}),[s]),p("resize",(function(e){s()})),Object(n.useEffect)((function(){var e=function(e){e.preventDefault(),e.stopPropagation()},t=function(e){var t=e.dataTransfer;Object(f.a)(t.files).forEach((function(e){var t=new FileReader;t.readAsDataURL(e);var n=Math.random();a({type:"ADD_PICTURE",payload:{url:"placeholder",id:n}}),t.onloadend=function(){a({type:"REMOVE_IMAGE",payload:n}),a({type:"ADD_PICTURE",payload:t.result})}}))},n=["dragenter","dragover","dragleave","drop"];return n.forEach((function(a){document.body.addEventListener(a,e),document.body.addEventListener("drop",t)})),function(){n.forEach((function(a){document.body.removeEventListener(a,e),document.body.removeEventListener("drop",t)}))}}),[]);var m=t.images.map((function(e,n){var l=e.width/e.height*20*o;return l||(l=0),r.a.createElement(y.a,{key:e.id,classNames:"item",timeout:300},r.a.createElement(E,{style:{flex:"1 1 ".concat(l,"%")},key:e.id,className:"gallery__image-container",src:e.url,onLoad:function(e){return function(e,n){var r=t.images;null!==r[n].width&&null!==r[n].height||a({type:"ADD_PICTURE_SIZE",payload:{index:n,width:e.target.clientWidth,height:e.target.clientHeight}})}(e,n)},onClick:function(){return a({type:"SET_BIG_IMAGE_URL",payload:e.url})}},r.a.createElement("div",{className:"image-hover"},r.a.createElement(h,{onClick:function(t){return function(e,t){e.stopPropagation(),a({type:"REMOVE_IMAGE",payload:t})}(t,e.id)},className:"image-hover__icon image-hover__close",icon:"#close"}))))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{className:"gallery"},m),0===m.length?r.a.createElement("div",{className:"empty"},"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"):"")};function R(e){if(!e)return JSON.parse(localStorage.getItem("data"))||null;localStorage.setItem("data",JSON.stringify(e))}function D(){return"_"+Math.random().toString(36).substr(2,9)}var w=function(e,t){var a=e.images;switch(t.type){case"__INIT__":return Object(g.a)(Object(g.a)({},e),R());case"ADD_SOME_PICTURES":for(var n=t.payload,r=0;r<n.length;r++)n[r].id=D(),n[r].width=n[r].width||null,n[r].height=n[r].height||null;return Object(g.a)(Object(g.a)({},e),{},{images:[].concat(Object(f.a)(e.images),Object(f.a)(n))});case"ADD_PICTURE":var l={width:null,height:null,id:t.payload.id||D(),url:t.payload};return a.push(l),Object(g.a)(Object(g.a)({},e),{},{images:Object(f.a)(a)});case"REMOVE_IMAGE":return a=e.images.filter((function(e){return e.id!==t.payload})),Object(g.a)(Object(g.a)({},e),{},{images:a});case"SET_BIG_IMAGE_URL":return Object(g.a)(Object(g.a)({},e),{},{bigImageUrl:t.payload});case"REMOVE_BIG_IMAGE_URL":return Object(g.a)(Object(g.a)({},e),{},{bigImageUrl:""});case"ADD_PICTURE_SIZE":var c=t.payload,i=c.index,o=c.width,u=c.height;return a[i].width=o,a[i].height=u,Object(g.a)(Object(g.a)({},e),{},{images:a});default:return e}};a(33),a(34);var S=function(e){var t=e.src,a=e.onClick;return t?r.a.createElement("div",{onClick:a,className:"magnify"},r.a.createElement("img",{src:t,className:"magnify__image",alt:""})):""};var k=function(){var e=Object(n.useReducer)(w,{bigImageUrl:"",images:[]}),t=Object(i.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){l({type:"__INIT__"})}),[]),Object(n.useEffect)((function(){R(a)}),[a]),r.a.createElement(d.Provider,{value:{state:a,dispatch:l}},r.a.createElement(o,null,r.a.createElement(m,null),r.a.createElement(C,null)),r.a.createElement(S,{onClick:function(){return l({type:"REMOVE_BIG_IMAGE_URL"})},src:a.bigImageUrl}),r.a.createElement(s.a,null))};c.a.render(r.a.createElement(k,null),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.3e46f643.chunk.js.map