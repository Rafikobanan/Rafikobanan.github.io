{"version":3,"sources":["hoc/Layout/Layout.js","components/UI/Input/Input.js","context/context.js","components/Loading/Loading.js","reducer/types.js","components/Loader/Loader.js","components/Image/Image.js","hooks/event.hook.js","components/Icon/Icon.js","components/Gallery/Gallery.js","storage/storage.js","reducer/reducer.js","components/Magnify/Magnify.js","App.js","index.js"],"names":["Layout","children","className","Input","onChange","placeholder","onKeyDown","value","useState","isPlaceholderActive","setIsPlaceholderActive","placeholderCls","push","onFocus","onBlur","type","join","Context","React","createContext","Loading","dispatch","useContext","setValue","notify","text","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","e","key","toUpperCase","payload","target","trim","htmlFor","id","input","file","files","reader","FileReader","readAsText","addEventListener","result","JSON","parse","galleryImages","data","i","length","imageObj","url","changeFileHandler","Loader","Image","src","style","onLoad","onClick","withLoader","isLoad","setIsLoad","cursor","backgroundImage","alt","useEventListener","eventName","handler","element","window","savedHandler","useRef","useEffect","current","eventListener","event","removeEventListener","Icon","icon","xlinkHref","k","Gallery","state","coefficient","setCoefficient","resizeHandler","useCallback","width","document","body","clientWidth","preventDefaults","preventDefault","stopPropagation","handleDrop","dt","dataTransfer","forEach","readAsDataURL","Math","random","onloadend","events","images","map","item","index","widthInPercent","height","CSSTransition","classNames","timeout","flex","clientHeight","loadHandler","removeHandler","TransitionGroup","storage","localStorage","getItem","setItem","stringify","toString","substr","action","arr","filter","bigImageUrl","Magnify","App","useReducer","reducer","Provider","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3e46f643.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Layout.scss';\r\n\r\nfunction Layout({children}) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Layout;","import React, { useState } from 'react';\r\nimport './Input.scss';\r\n\r\nfunction Input({className = null, onChange = null, placeholder = null, onKeyDown = null, value = null}) {\r\n\tconst [isPlaceholderActive, setIsPlaceholderActive] = useState(false);\r\n\r\n\tconst placeholderCls = [\r\n\t\t'input-field__placeholder'\r\n\t];\r\n\r\n\tif (isPlaceholderActive || value) placeholderCls.push('input-field__placeholder_active');\r\n\r\n\tconst focusHandler = () => {\r\n\t\tsetIsPlaceholderActive(true);\r\n\t};\r\n\r\n\tconst blurHandler = () => {\r\n\t\tsetIsPlaceholderActive(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"input-field\">\r\n\t\t\t<input\r\n\t\t\t\tclassName={`input ${className}`}\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t\tonKeyDown={onKeyDown}\r\n\t\t\t\tonFocus={focusHandler}\r\n\t\t\t\tonBlur={blurHandler}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t/>\r\n\t\t\t<span className={placeholderCls.join(' ')}>{placeholder}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nexport const Context = React.createContext();","import React, { useContext, useState } from 'react';\r\nimport './Loading.scss';\r\nimport Input from '../UI/Input/Input';\r\nimport { toast } from 'react-toastify';\r\nimport { Context } from '../../context/context';\r\nimport { ADD_SOME_PICTURES, ADD_PICTURE } from '../../reducer/types';\r\n\r\nfunction Loading() {\r\n\tconst {dispatch} = useContext(Context);\r\n\tconst [value, setValue] = useState('');\r\n\r\n\tconst notify = (text) => {\r\n\t\ttoast.error(text, {\r\n\t\t\tposition: 'top-right',\r\n\t\t\tautoClose: 3000,\r\n\t\t\thideProgressBar: false,\r\n\t\t\tcloseOnClick: true,\r\n\t\t\tpauseOnHover: true,\r\n\t\t\tdraggable: true,\r\n\t\t\tprogress: undefined,\r\n\t\t});\r\n\t};\r\n\r\n\tconst changeFileHandler = (input) => {\r\n\t\tlet file = input.files[0];\r\n\r\n\t\tif (!file) return;\r\n\r\n\t\tif (file.type !== 'application/json') {\r\n\t\t\tnotify('Требуемый формат файла - JSON!');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst reader = new FileReader();\r\n\r\n\t\treader.readAsText(file);\r\n\r\n\t\treader.addEventListener('load', () => {\r\n\t\t\tconst result = JSON.parse(reader.result);\r\n\r\n\t\t\tif (!result.galleryImages) {\r\n\t\t\t\tnotify('Не существует массива galleryImages!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst data = [];\r\n\t\t\tfor (let i = 0; i < result.galleryImages.length; i++) {\r\n\t\t\t\tlet imageObj = result.galleryImages[i];\r\n\r\n\t\t\t\tif (typeof imageObj === 'string') imageObj = {url: result.galleryImages[i]};\r\n\r\n\t\t\t\tdata.push(imageObj);\r\n\t\t\t}\r\n\r\n\t\t\tdispatch({type: ADD_SOME_PICTURES, payload: data});\r\n\t\t});\r\n\r\n\t\treader.addEventListener('error', () => {\r\n\t\t\tnotify(reader.error);\r\n\t\t});\r\n\t};\r\n\r\n\tconst keyDownHandler = (e) => {\r\n\t\tif (e.key.toUpperCase() === 'ENTER') {\r\n\t\t\tif (!value) {\r\n\t\t\t\tnotify('Вставьте ссылку');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetValue('');\r\n\t\t\tdispatch({type: ADD_PICTURE, payload: value});\r\n\t\t}\r\n\t};\r\n\r\n\tconst changeInputHandler = (e) => {\r\n\t\tsetValue(e.target.value.trim());\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"loading\">\r\n\t\t\t<Input \r\n\t\t\t\tclassName=\"loading__input\"\r\n\t\t\t\tplaceholder=\"Вставьте ссылку\"\r\n\t\t\t\tonKeyDown={keyDownHandler}\r\n\t\t\t\tonChange={changeInputHandler}\r\n\t\t\t\tvalue={value}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor=\"upload\" className=\"loading__label\">Загрузить</label>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\tclassName=\"loading__upload\"\r\n\t\t\t\tid=\"upload\"\r\n\t\t\t\tonChange={(e) => changeFileHandler(e.target)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Loading;","export const __INIT__ = '__INIT__';\r\nexport const ADD_SOME_PICTURES = 'ADD_SOME_PICTURES';\r\nexport const REMOVE_IMAGE = 'REMOVE_IMAGE';\r\nexport const ADD_PICTURE = 'ADD_PICTURE';\r\nexport const ADD_PICTURE_SIZE = 'ADD_PICTURE_SIZE';\r\nexport const REMOVE_BIG_IMAGE_URL = 'REMOVE_BIG_IMAGE_URL';\r\nexport const SET_BIG_IMAGE_URL = 'SET_BIG_IMAGE_URL';","import React from 'react';\r\nimport './Loader.scss';\r\n\r\nfunction Loader() {\r\n\treturn (\r\n\t\t<div className=\"lds-dual-ring\"></div>\r\n\t);\r\n}\r\n\r\nexport default Loader;","import React, { useState } from 'react';\r\nimport './Image.scss';\r\nimport Loader from '../Loader/Loader';\r\n\r\nfunction Image({\r\n\tclassName = '',\r\n\tsrc = null,\r\n\tstyle = null,\r\n\tchildren = null,\r\n\tonLoad = null,\r\n\tonClick = null,\r\n\twithLoader = true\r\n}) {\r\n\tconst [isLoad, setIsLoad] = useState(withLoader);\r\n\r\n\tconst loadHandler = (e) => {\r\n\t\tif (!withLoader) return;\r\n\t\tsetIsLoad(false);\r\n\t\tif (onLoad) onLoad(e);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\tclassName={`image-container ${className}`}\r\n\t\t\t\tstyle={{cursor: `${onClick ? 'pointer' : ''}`, ...style}}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"image\"\r\n\t\t\t\t\tstyle={{backgroundImage: `url(${src})`}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<img onLoad={loadHandler} className={`${isLoad ? 'image__load' : 'image__hidden'}`} src={src} alt=\"\"/>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t\t{isLoad ? <Loader/> : ''}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Image;","import {useRef, useEffect} from 'react';\r\n\r\nfunction useEventListener(eventName, handler, element = window) {\r\n  const savedHandler = useRef();\r\n\r\n  useEffect(() => {\r\n    savedHandler.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(\r\n    () => {\r\n      const isSupported = element && element.addEventListener;\r\n      if (!isSupported) return;\r\n\r\n      const eventListener = (event) => savedHandler.current(event);\r\n\r\n      element.addEventListener(eventName, eventListener);\r\n\r\n      return () => {\r\n        element.removeEventListener(eventName, eventListener);\r\n      };\r\n    },\r\n    [eventName, element],\r\n  );\r\n}\r\n\r\nexport default useEventListener;","import React from 'react';\r\n\r\nfunction Icon({onClick = null, className = null, style = null, icon}) {\r\n\treturn (\r\n\t\t<div onClick={onClick}>\r\n\t\t\t<svg className={className} style={style}>\r\n\t\t\t\t<use xlinkHref={icon}></use>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Icon;","import React, { useContext, useState, useEffect, useCallback } from 'react';\r\nimport './Gallery.scss';\r\nimport Image from '../Image/Image';\r\nimport { Context } from '../../context/context';\r\nimport useEventListener from '../../hooks/event.hook';\r\nimport Icon from '../Icon/Icon';\r\nimport { REMOVE_IMAGE, ADD_PICTURE_SIZE, ADD_PICTURE, SET_BIG_IMAGE_URL } from '../../reducer/types';\r\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\r\n\r\nconst k = {\r\n\tbig: 1,\r\n\taboveMedium: 1.2,\r\n\tmedium: 1.4,\r\n\tbelowMedium: 1.6,\r\n\tsmall: 1.8,\r\n};\r\n\r\nfunction Gallery() {\r\n\tconst {state, dispatch} = useContext(Context);\r\n\tconst [coefficient, setCoefficient] = useState(k.big);\r\n\r\n\tconst resizeHandler = useCallback(() => {\r\n\t\tconst width = document.body.clientWidth;\r\n\r\n\t\tif (width >= 860 && coefficient !== k.big) {\r\n\t\t\tsetCoefficient(k.big);\r\n\t\t}\r\n\r\n\t\tif (width < 860 && width >= 705 && coefficient !== k.aboveMedium) {\r\n\t\t\tsetCoefficient(k.aboveMedium);\r\n\t\t}\r\n\r\n\t\tif (width < 705 && width >= 550 && coefficient !== k.medium) {\r\n\t\t\tsetCoefficient(k.medium);\r\n\t\t}\r\n\r\n\t\tif (width < 550 && width >= 435 && coefficient !== k.belowMedium) {\r\n\t\t\tsetCoefficient(k.belowMedium);\r\n\t\t}\r\n\r\n\t\tif (width < 435 && coefficient !== k.small) {\r\n\t\t\tsetCoefficient(k.small);\r\n\t\t}\r\n\t}, [coefficient]);\r\n\r\n\tconst removeHandler = (e, id) => {\r\n\t\te.stopPropagation();\r\n\t\tdispatch({type: REMOVE_IMAGE, payload: id});\r\n\t};\r\n\r\n\tconst loadHandler = (e, index) => {\r\n\t\tconst images = state.images;\r\n\t\tif (images[index].width === null || images[index].height === null) {\r\n\t\t\tdispatch({type: ADD_PICTURE_SIZE, payload: {\r\n\t\t\t\tindex: index,\r\n\t\t\t\twidth: e.target.clientWidth,\r\n\t\t\t\theight: e.target.clientHeight\r\n\t\t\t}});\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tresizeHandler();\r\n\t}, [resizeHandler]);\r\n\r\n\tuseEventListener('resize', (e) => {\r\n\t\tresizeHandler();\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst preventDefaults = (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t};\r\n\r\n\t\tconst handleDrop = (e) => {\r\n\t\t\tconst dt = e.dataTransfer;\r\n\t\t\tconst files = [...dt.files];\r\n\r\n\t\t\tfiles.forEach((file) => {\r\n\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\treader.readAsDataURL(file);\r\n\r\n\t\t\t\tconst id = Math.random();\r\n\t\t\t\tdispatch({type: ADD_PICTURE, payload: {url: 'placeholder', id}});\r\n\r\n\t\t\t\treader.onloadend = function() {\r\n\t\t\t\t\tdispatch({type: REMOVE_IMAGE, payload: id});\r\n\t\t\t\t\tdispatch({type: ADD_PICTURE, payload: reader.result});\r\n\t\t\t\t};\r\n\t\t\t});\r\n\t\t};\r\n\r\n\t\tconst events = ['dragenter', 'dragover', 'dragleave', 'drop'];\r\n\r\n\t\tevents.forEach(eventName => {\r\n\t\t\tdocument.body.addEventListener(eventName, preventDefaults);\r\n\t\t\tdocument.body.addEventListener('drop', handleDrop);\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tevents.forEach(eventName => {\r\n\t\t\t\tdocument.body.removeEventListener(eventName, preventDefaults);\r\n\t\t\t\tdocument.body.removeEventListener('drop', handleDrop);\r\n\t\t\t});\r\n\t\t}\r\n\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n\r\n\tconst images = state.images.map((item, index) => {\r\n\t\tlet widthInPercent = item.width / item.height * 20 * coefficient;\r\n\r\n\t\tif (!widthInPercent) widthInPercent = 0;\r\n\r\n\t\treturn (\r\n\t\t\t<CSSTransition\r\n\t\t\t\tkey={item.id}\r\n\t\t\t\tclassNames=\"item\"\r\n\t\t\t\ttimeout={300}\r\n\t\t\t>\r\n\t\t\t\t<Image\r\n\t\t\t\t\tstyle={{flex: `1 1 ${widthInPercent}%`}}\r\n\t\t\t\t\tkey={item.id}\r\n\t\t\t\t\tclassName=\"gallery__image-container\"\r\n\t\t\t\t\tsrc={item.url}\r\n\t\t\t\t\tonLoad={(e) => loadHandler(e, index)}\r\n\t\t\t\t\tonClick={() => dispatch({type: SET_BIG_IMAGE_URL, payload: item.url})}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"image-hover\">\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tonClick={(e) => removeHandler(e, item.id)}\r\n\t\t\t\t\t\t\tclassName=\"image-hover__icon image-hover__close\"\r\n\t\t\t\t\t\t\ticon=\"#close\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Image>\r\n\t\t\t</CSSTransition>\r\n\t\t);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<TransitionGroup className=\"gallery\">\r\n\t\t\t\t{images}\r\n\t\t\t</TransitionGroup>\r\n\r\n\t\t\t{images.length === 0 ? \r\n\t\t\t\t<div className=\"empty\">Добавьте картинки</div> :\r\n\t\t\t\t''\r\n\t\t\t}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Gallery;","export default function storage(data) {\r\n\tif (data) {\r\n\t\tlocalStorage.setItem('data', JSON.stringify(data));\r\n\t\treturn;\r\n\t}\r\n\r\n\treturn JSON.parse(localStorage.getItem('data')) || null;\r\n}","import { __INIT__, ADD_SOME_PICTURES, REMOVE_IMAGE, ADD_PICTURE, ADD_PICTURE_SIZE, REMOVE_BIG_IMAGE_URL, SET_BIG_IMAGE_URL } from \"./types\";\r\nimport storage from \"../storage/storage\";\r\n\r\nfunction id() {\r\n\treturn '_' + Math.random().toString(36).substr(2, 9);\r\n}\r\n\r\nexport default function(state, action) {\r\n\tlet {images} = state;\r\n\r\n\tswitch (action.type) {\r\n\t\tcase __INIT__:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\t...storage()\r\n\t\t\t};\r\n\r\n\t\tcase ADD_SOME_PICTURES:\r\n\t\t\tconst arr = action.payload;\r\n\r\n\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\tarr[i].id = id();\r\n\t\t\t\tarr[i].width = arr[i].width || null;\r\n\t\t\t\tarr[i].height = arr[i].height || null;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages: [...state.images, ...arr],\r\n\t\t\t};\r\n\r\n\t\tcase ADD_PICTURE:\r\n\t\t\tconst imageObj = {\r\n\t\t\t\twidth: null,\r\n\t\t\t\theight: null,\r\n\t\t\t\tid: action.payload.id || id(),\r\n\t\t\t\turl: action.payload,\r\n\t\t\t};\r\n\r\n\t\t\timages.push(imageObj);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages: [...images],\r\n\t\t\t};\r\n\r\n\t\tcase REMOVE_IMAGE:\r\n\t\t\timages = state.images.filter((item) => item.id !== action.payload);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages\r\n\t\t\t};\r\n\r\n\t\tcase SET_BIG_IMAGE_URL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tbigImageUrl: action.payload\r\n\t\t\t};\r\n\r\n\t\tcase REMOVE_BIG_IMAGE_URL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tbigImageUrl: ''\r\n\t\t\t};\r\n\r\n\t\tcase ADD_PICTURE_SIZE:\r\n\t\t\tconst {index, width, height} = action.payload;\r\n\t\t\timages[index].width = width;\r\n\t\t\timages[index].height = height;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport './Magnify.scss';\r\n\r\nfunction Magnify({src, onClick}) {\r\n\tif (!src) return '';\r\n\r\n\treturn (\r\n\t\t<div onClick={onClick} className=\"magnify\">\r\n\t\t\t<img src={src} className=\"magnify__image\" alt=\"\"/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Magnify;","import React, { useReducer, useEffect } from 'react';\nimport Layout from './hoc/Layout/Layout';\nimport Loading from './components/Loading/Loading';\nimport Gallery from './components/Gallery/Gallery';\nimport reducer from './reducer/reducer';\nimport { Context } from './context/context';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport storage from './storage/storage';\nimport { __INIT__, REMOVE_BIG_IMAGE_URL } from './reducer/types';\nimport Magnify from './components/Magnify/Magnify';\n\nfunction App() {\n\tconst [state, dispatch] = useReducer(reducer, {\n\t\tbigImageUrl: '',\n\t\timages: [],\n\t});\n\n\tuseEffect(() => {\n\t\tdispatch({type: __INIT__});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tstorage(state);\n\t}, [state]);\n\n  return (\n\t\t<Context.Provider value={{state, dispatch}}>\n\t\t\t<Layout>\n\t\t\t\t<Loading />\n\t\t\t\t<Gallery />\n\t\t\t</Layout>\n\t\t\t<Magnify\n\t\t\t\tonClick={() => dispatch({type: REMOVE_BIG_IMAGE_URL})}\n\t\t\t\tsrc={state.bigImageUrl}\n\t\t\t/>\n\t\t\t<ToastContainer />\n\t\t</Context.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './libs/reset.css';\nimport './index.scss';\nimport App from './App';\n\nReactDOM.render(\n\t<App />,\n\tdocument.getElementById('root')\n);\n"],"sourceRoot":""}