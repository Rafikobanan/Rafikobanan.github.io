(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{136:function(e,a,t){},137:function(e,a,t){},139:function(e,a,t){},140:function(e,a,t){},141:function(e,a,t){},144:function(e,a,t){},145:function(e,a,t){},146:function(e,a,t){},148:function(e,a,t){},149:function(e,a,t){"use strict";t.r(a);t(80);var n=t(0),r=t.n(n),l=t(10),c=t.n(l),i=(t(136),t(137),t(51)),o=t.n(i),u=t(76),s=t(6);t(139);var d=function(e){var a=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},a))};t(140),t(141);var m=function(e){var a=e.className,t=void 0===a?null:a,l=e.onChange,c=void 0===l?null:l,i=e.placeholder,o=void 0===i?null:i,u=e.onKeyDown,d=void 0===u?null:u,m=e.value,f=void 0===m?null:m,v=Object(n.useState)(!1),g=Object(s.a)(v,2),E=g[0],p=g[1],h=["input-field__placeholder"];return(E||f)&&h.push("input-field__placeholder_active"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{className:"input ".concat(t),onChange:c,onKeyDown:d,onFocus:function(){p(!0)},onBlur:function(){p(!1)},value:f,type:"text"}),r.a.createElement("span",{className:h.join(" ")},o))},f=r.a.createContext(),v=t(34),g=function(e){v.b.error(e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};var E=function(){var e=Object(n.useContext)(f).dispatch,a=Object(n.useState)(""),t=Object(s.a)(a,2),l=t[0],c=t[1];return r.a.createElement("div",{className:"loading"},r.a.createElement(m,{className:"loading__input",placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443",onKeyDown:function(a){if("ENTER"===a.key.toUpperCase()){if(!l)return void g("\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443");c(""),e({type:"ADD_PICTURE",payload:{url:l}})}},onChange:function(e){c(e.target.value.trim())},value:l}),r.a.createElement("label",{htmlFor:"upload",className:"loading__label"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),r.a.createElement("input",{type:"file",className:"loading__upload",id:"upload",onChange:function(a){return function(a){var t=a.files[0];if(t)if("application/json"===t.type){var n=new FileReader;n.readAsText(t),n.addEventListener("load",(function(){var a=JSON.parse(n.result);if(a.galleryImages){for(var t=[],r=0;r<a.galleryImages.length;r++){var l=a.galleryImages[r];"string"===typeof l&&(l={url:a.galleryImages[r]}),t.push(l)}e({type:"ADD_SOME_PICTURES",payload:t})}else g("\u041d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 galleryImages!")})),n.addEventListener("error",(function(){g(n.error)}))}else g("\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 - JSON!")}(a.target)}}))},p=(t(144),t(2));t(145),t(146);var h=function(e){var a=e.children,t=void 0===a?null:a,n=e.className,l=void 0===n?"":n;return r.a.createElement("div",{className:"loader ".concat(l)},r.a.createElement("div",{className:"lds-dual-ring"}),t)};var y=function(e){var a=e.className,t=void 0===a?"":a,l=e.src,c=void 0===l?null:l,i=e.style,o=void 0===i?null:i,u=e.children,d=void 0===u?null:u,m=e.onLoad,f=void 0===m?null:m,v=e.onClick,g=void 0===v?null:v,E=Object(n.useState)(!0),y=Object(s.a)(E,2),b=y[0],O=y[1];return r.a.createElement(r.a.Fragment,null,b?r.a.createElement(r.a.Fragment,null,r.a.createElement(h,{className:t,children:d}),r.a.createElement("img",{onLoad:function(e){O(!1),f&&f(e)},className:"image-load",src:c,alt:""})):r.a.createElement("div",{onClick:g,className:"image-container ".concat(t),style:Object(p.a)({cursor:"".concat(g?"pointer":"")},o)},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(c,")")}},d)))};var b=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=a}),[a]),Object(n.useEffect)((function(){if(t&&t.addEventListener){var a=function(e){return r.current(e)};return t.addEventListener(e,a),function(){t.removeEventListener(e,a)}}}),[e,t])};var O=function(e){var a=e.onClick,t=void 0===a?null:a,n=e.className,l=void 0===n?null:n,c=e.style,i=void 0===c?null:c,o=e.icon;return r.a.createElement("div",{onClick:t},r.a.createElement("svg",{className:l,style:i},r.a.createElement("use",{xlinkHref:o})))},_=t(150),j=t(151),I=1,N=1.2,C=1.4,w=1.6,R=1.8;var k=function(){var e=Object(n.useContext)(f),a=e.state,t=e.dispatch,l=Object(n.useState)(I),c=Object(s.a)(l,2),i=c[0],o=c[1],u=Object(n.useCallback)((function(){var e=document.body.clientWidth;e>=860&&i!==I&&o(I),e<860&&e>=705&&i!==N&&o(N),e<705&&e>=550&&i!==C&&o(C),e<550&&e>=435&&i!==w&&o(w),e<435&&i!==R&&o(R)}),[i]);Object(n.useEffect)((function(){u()}),[u]),b("resize",(function(e){u()}));var d=a.images.map((function(e,n){var l=e.width/e.height*20*i;return l&&l!==1/0||(l=0),r.a.createElement(_.a,{key:e.id,classNames:"item",timeout:300},r.a.createElement(y,{style:{flex:"1 1 ".concat(l,"%")},key:e.id,className:"gallery__image-container",src:e.url,onLoad:function(e){return function(e,n){var r=a.images;null!==r[n].width&&null!==r[n].height||t({type:"ADD_PICTURE_SIZE",payload:{index:n,width:e.target.clientWidth,height:e.target.clientHeight}})}(e,n)},onClick:function(){return t({type:"SET_BIG_IMAGE_URL",payload:e.url})}},r.a.createElement("div",{className:"image-hover"},r.a.createElement(O,{onClick:function(a){return function(e,a){e.stopPropagation(),t({type:"REMOVE_IMAGE",payload:a})}(a,e.id)},className:"image-hover__icon image-hover__close",icon:"#close"}))))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"gallery"},d),0===d.length?r.a.createElement("div",{className:"empty"},r.a.createElement("span",null,"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0432\u0430\u0448\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438")):"")},D=t(36);function L(){return"_"+Math.random().toString(36).substr(2,9)}var U=function(e,a){var t=e.images;switch(a.type){case"ADD_SOME_PICTURES":for(var n=a.payload,r=0;r<n.length;r++)n[r].id=L(),n[r].width=n[r].width||null,n[r].height=n[r].height||null;return Object(p.a)(Object(p.a)({},e),{},{images:[].concat(Object(D.a)(e.images),Object(D.a)(n))});case"ADD_PICTURE":var l={width:null,height:null,id:a.payload.id||L(),url:a.payload.url};return t.push(l),Object(p.a)(Object(p.a)({},e),{},{images:Object(D.a)(t)});case"REMOVE_IMAGE":return t=e.images.filter((function(e){return e.id!==a.payload})),Object(p.a)(Object(p.a)({},e),{},{images:t});case"SET_BIG_IMAGE_URL":return Object(p.a)(Object(p.a)({},e),{},{bigImageUrl:a.payload});case"REMOVE_BIG_IMAGE_URL":return Object(p.a)(Object(p.a)({},e),{},{bigImageUrl:""});case"ADD_PICTURE_SIZE":var c=a.payload,i=c.index,o=c.width,u=c.height;return t[i].width=o,t[i].height=u,Object(p.a)(Object(p.a)({},e),{},{images:t});default:return e}};t(147),t(148);var A=function(e){var a=e.src,t=e.onClick;return a?r.a.createElement("div",{onClick:t,className:"magnify"},r.a.createElement("img",{src:a,className:"magnify__image",alt:""})):""};var S=function(){var e=Object(n.useReducer)(U,{bigImageUrl:"",images:[]}),a=Object(s.a)(e,2),t=a[0],l=a[1];return Object(n.useEffect)((function(){var e=function(e){e.preventDefault(),e.stopPropagation()},a=function(e){var a=e.dataTransfer,t=Array.from(a.files),n=function(e){return new Promise((function(a,t){var n=new FileReader;n.readAsDataURL(e),n.onloadend=function(){l({type:"ADD_PICTURE",payload:{url:n.result}}),a()},n.onerror=function(e){t(e)}}))};t.forEach(function(){var e=Object(u.a)(o.a.mark((function e(a){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}())},t=["dragenter","dragover","dragleave","drop"];return t.forEach((function(t){document.body.addEventListener(t,e),document.body.addEventListener("drop",a)})),function(){t.forEach((function(t){document.body.removeEventListener(t,e),document.body.removeEventListener("drop",a)}))}}),[]),r.a.createElement(f.Provider,{value:{state:t,dispatch:l}},r.a.createElement(d,null,r.a.createElement(E,null),r.a.createElement(k,null)),r.a.createElement(A,{onClick:function(){return l({type:"REMOVE_BIG_IMAGE_URL"})},src:t.bigImageUrl}),r.a.createElement(v.a,null))};c.a.render(r.a.createElement(S,null),document.getElementById("root"))},79:function(e,a,t){e.exports=t(149)}},[[79,1,2]]]);
//# sourceMappingURL=main.34200370.chunk.js.map