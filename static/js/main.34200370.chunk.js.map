{"version":3,"sources":["hoc/Layout/Layout.js","components/UI/Input/Input.js","context/context.js","utils/notify.js","components/Loading/Loading.js","reducer/types.js","components/Loader/Loader.js","components/Image/Image.js","hooks/event.hook.js","components/Icon/Icon.js","components/Gallery/Gallery.js","reducer/reducer.js","components/Magnify/Magnify.js","App.js","index.js"],"names":["Layout","children","className","Input","onChange","placeholder","onKeyDown","value","useState","isPlaceholderActive","setIsPlaceholderActive","placeholderCls","push","onFocus","onBlur","type","join","Context","React","createContext","notify","text","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","Loading","dispatch","useContext","setValue","e","key","toUpperCase","payload","url","target","trim","htmlFor","id","input","file","files","reader","FileReader","readAsText","addEventListener","result","JSON","parse","galleryImages","data","i","length","imageObj","changeFileHandler","Loader","Image","src","style","onLoad","onClick","isLoad","setIsLoad","alt","cursor","backgroundImage","useEventListener","eventName","handler","element","window","savedHandler","useRef","useEffect","current","eventListener","event","removeEventListener","Icon","icon","xlinkHref","k","Gallery","state","coefficient","setCoefficient","resizeHandler","useCallback","width","document","body","clientWidth","images","map","item","index","widthInPercent","height","Infinity","CSSTransition","classNames","timeout","flex","clientHeight","loadHandler","stopPropagation","removeHandler","TransitionGroup","Math","random","toString","substr","action","arr","filter","bigImageUrl","Magnify","App","useReducer","reducer","preventDefaults","preventDefault","handleDrop","dt","dataTransfer","Array","from","loadFile","Promise","res","rej","readAsDataURL","onloadend","onerror","forEach","a","events","Provider","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.34200370.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Layout.scss';\r\n\r\nfunction Layout({children}) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Layout;","import React, { useState } from 'react';\r\nimport './Input.scss';\r\n\r\nfunction Input({className = null, onChange = null, placeholder = null, onKeyDown = null, value = null}) {\r\n\tconst [isPlaceholderActive, setIsPlaceholderActive] = useState(false);\r\n\r\n\tconst placeholderCls = [\r\n\t\t'input-field__placeholder'\r\n\t];\r\n\r\n\tif (isPlaceholderActive || value) placeholderCls.push('input-field__placeholder_active');\r\n\r\n\tconst focusHandler = () => {\r\n\t\tsetIsPlaceholderActive(true);\r\n\t};\r\n\r\n\tconst blurHandler = () => {\r\n\t\tsetIsPlaceholderActive(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"input-field\">\r\n\t\t\t<input\r\n\t\t\t\tclassName={`input ${className}`}\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t\tonKeyDown={onKeyDown}\r\n\t\t\t\tonFocus={focusHandler}\r\n\t\t\t\tonBlur={blurHandler}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t/>\r\n\t\t\t<span className={placeholderCls.join(' ')}>{placeholder}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nexport const Context = React.createContext();","import { toast } from 'react-toastify';\r\n\r\nexport const notify = (text) => {\r\n\ttoast.error(text, {\r\n\t\tposition: 'top-right',\r\n\t\tautoClose: 3000,\r\n\t\thideProgressBar: false,\r\n\t\tcloseOnClick: true,\r\n\t\tpauseOnHover: true,\r\n\t\tdraggable: true,\r\n\t\tprogress: undefined,\r\n\t});\r\n};","import React, { useContext, useState } from 'react';\r\nimport './Loading.scss';\r\nimport Input from '../UI/Input/Input';\r\nimport { Context } from '../../context/context';\r\nimport { ADD_SOME_PICTURES, ADD_PICTURE } from '../../reducer/types';\r\nimport { notify } from '../../utils/notify';\r\n\r\nfunction Loading() {\r\n\tconst {dispatch} = useContext(Context);\r\n\tconst [value, setValue] = useState('');\r\n\r\n\tconst changeFileHandler = (input) => {\r\n\t\tlet file = input.files[0];\r\n\r\n\t\tif (!file) return;\r\n\r\n\t\tif (file.type !== 'application/json') {\r\n\t\t\tnotify('Требуемый формат файла - JSON!');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst reader = new FileReader();\r\n\r\n\t\treader.readAsText(file);\r\n\r\n\t\treader.addEventListener('load', () => {\r\n\t\t\tconst result = JSON.parse(reader.result);\r\n\r\n\t\t\tif (!result.galleryImages) {\r\n\t\t\t\tnotify('Не существует массива galleryImages!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst data = [];\r\n\t\t\tfor (let i = 0; i < result.galleryImages.length; i++) {\r\n\t\t\t\tlet imageObj = result.galleryImages[i];\r\n\r\n\t\t\t\tif (typeof imageObj === 'string') imageObj = {url: result.galleryImages[i]};\r\n\r\n\t\t\t\tdata.push(imageObj);\r\n\t\t\t}\r\n\r\n\t\t\tdispatch({type: ADD_SOME_PICTURES, payload: data});\r\n\t\t});\r\n\r\n\t\treader.addEventListener('error', () => {\r\n\t\t\tnotify(reader.error);\r\n\t\t});\r\n\t};\r\n\r\n\tconst keyDownHandler = (e) => {\r\n\t\tif (e.key.toUpperCase() === 'ENTER') {\r\n\t\t\tif (!value) {\r\n\t\t\t\tnotify('Вставьте ссылку');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetValue('');\r\n\t\t\tdispatch({type: ADD_PICTURE, payload: {url: value}});\r\n\t\t}\r\n\t};\r\n\r\n\tconst changeInputHandler = (e) => {\r\n\t\tsetValue(e.target.value.trim());\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"loading\">\r\n\t\t\t<Input \r\n\t\t\t\tclassName=\"loading__input\"\r\n\t\t\t\tplaceholder=\"Вставьте ссылку\"\r\n\t\t\t\tonKeyDown={keyDownHandler}\r\n\t\t\t\tonChange={changeInputHandler}\r\n\t\t\t\tvalue={value}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor=\"upload\" className=\"loading__label\">Загрузить</label>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\tclassName=\"loading__upload\"\r\n\t\t\t\tid=\"upload\"\r\n\t\t\t\tonChange={(e) => changeFileHandler(e.target)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Loading;","export const ADD_SOME_PICTURES = 'ADD_SOME_PICTURES';\r\nexport const REMOVE_IMAGE = 'REMOVE_IMAGE';\r\nexport const ADD_PICTURE = 'ADD_PICTURE';\r\nexport const ADD_PICTURE_SIZE = 'ADD_PICTURE_SIZE';\r\nexport const REMOVE_BIG_IMAGE_URL = 'REMOVE_BIG_IMAGE_URL';\r\nexport const SET_BIG_IMAGE_URL = 'SET_BIG_IMAGE_URL';","import React from 'react';\r\nimport './Loader.scss';\r\n\r\nfunction Loader({children = null, className = ''}) {\r\n\treturn (\r\n\t\t<div className={`loader ${className}`}>\r\n\t\t\t<div className=\"lds-dual-ring\"></div>\r\n\t\t\t{children}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Loader;","import React, { useState } from 'react';\r\nimport './Image.scss';\r\nimport Loader from '../Loader/Loader';\r\n\r\nfunction Image({\r\n\tclassName = '',\r\n\tsrc = null,\r\n\tstyle = null,\r\n\tchildren = null,\r\n\tonLoad = null,\r\n\tonClick = null,\r\n}) {\r\n\tconst [isLoad, setIsLoad] = useState(true);\r\n\r\n\tconst loadHandler = (e) => {\r\n\t\tsetIsLoad(false);\r\n\t\tif (onLoad) onLoad(e);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{isLoad ? (\r\n\t\t\t\t<>\r\n\t\t\t\t\t<Loader className={className} children={children}/>\r\n\t\t\t\t\t<img onLoad={loadHandler} className=\"image-load\" src={src} alt=\"\"/>\r\n\t\t\t\t</>\r\n\t\t\t) : \r\n\t\t\t\t<div\r\n\t\t\t\t\tonClick={onClick}\r\n\t\t\t\t\tclassName={`image-container ${className}`}\r\n\t\t\t\t\tstyle={{cursor: `${onClick ? 'pointer' : ''}`, ...style}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tclassName=\"image\"\r\n\t\t\t\t\t\tstyle={{backgroundImage: `url(${src})`}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{children}\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Image;","import {useRef, useEffect} from 'react';\r\n\r\nfunction useEventListener(eventName, handler, element = window) {\r\n  const savedHandler = useRef();\r\n\r\n  useEffect(() => {\r\n    savedHandler.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(\r\n    () => {\r\n      const isSupported = element && element.addEventListener;\r\n      if (!isSupported) return;\r\n\r\n      const eventListener = (event) => savedHandler.current(event);\r\n\r\n      element.addEventListener(eventName, eventListener);\r\n\r\n      return () => {\r\n        element.removeEventListener(eventName, eventListener);\r\n      };\r\n    },\r\n    [eventName, element],\r\n  );\r\n}\r\n\r\nexport default useEventListener;","import React from 'react';\r\n\r\nfunction Icon({onClick = null, className = null, style = null, icon}) {\r\n\treturn (\r\n\t\t<div onClick={onClick}>\r\n\t\t\t<svg className={className} style={style}>\r\n\t\t\t\t<use xlinkHref={icon}></use>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Icon;","import React, { useContext, useState, useEffect, useCallback } from 'react';\r\nimport './Gallery.scss';\r\nimport Image from '../Image/Image';\r\nimport { Context } from '../../context/context';\r\nimport useEventListener from '../../hooks/event.hook';\r\nimport Icon from '../Icon/Icon';\r\nimport { REMOVE_IMAGE, ADD_PICTURE_SIZE, SET_BIG_IMAGE_URL } from '../../reducer/types';\r\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\r\n\r\nconst k = {\r\n\tbig: 1,\r\n\taboveMedium: 1.2,\r\n\tmedium: 1.4,\r\n\tbelowMedium: 1.6,\r\n\tsmall: 1.8,\r\n};\r\n\r\nfunction Gallery() {\r\n\tconst {state, dispatch} = useContext(Context);\r\n\tconst [coefficient, setCoefficient] = useState(k.big);\r\n\r\n\tconst resizeHandler = useCallback(() => {\r\n\t\tconst width = document.body.clientWidth;\r\n\r\n\t\tif (width >= 860 && coefficient !== k.big) {\r\n\t\t\tsetCoefficient(k.big);\r\n\t\t}\r\n\r\n\t\tif (width < 860 && width >= 705 && coefficient !== k.aboveMedium) {\r\n\t\t\tsetCoefficient(k.aboveMedium);\r\n\t\t}\r\n\r\n\t\tif (width < 705 && width >= 550 && coefficient !== k.medium) {\r\n\t\t\tsetCoefficient(k.medium);\r\n\t\t}\r\n\r\n\t\tif (width < 550 && width >= 435 && coefficient !== k.belowMedium) {\r\n\t\t\tsetCoefficient(k.belowMedium);\r\n\t\t}\r\n\r\n\t\tif (width < 435 && coefficient !== k.small) {\r\n\t\t\tsetCoefficient(k.small);\r\n\t\t}\r\n\t}, [coefficient]);\r\n\r\n\tconst removeHandler = (e, id) => {\r\n\t\te.stopPropagation();\r\n\t\tdispatch({type: REMOVE_IMAGE, payload: id});\r\n\t};\r\n\r\n\tconst loadHandler = (e, index) => {\r\n\t\tconst images = state.images;\r\n\t\tif (images[index].width === null || images[index].height === null) {\r\n\t\t\tdispatch({type: ADD_PICTURE_SIZE, payload: {\r\n\t\t\t\tindex: index,\r\n\t\t\t\twidth: e.target.clientWidth,\r\n\t\t\t\theight: e.target.clientHeight\r\n\t\t\t}});\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tresizeHandler();\r\n\t}, [resizeHandler]);\r\n\r\n\tuseEventListener('resize', (e) => {\r\n\t\tresizeHandler();\r\n\t});\r\n\r\n\tconst images = state.images.map((item, index) => {\r\n\t\tlet widthInPercent = item.width / item.height * 20 * coefficient;\r\n\r\n\t\tif (!widthInPercent || widthInPercent === Infinity) widthInPercent = 0;\r\n\r\n\t\treturn (\r\n\t\t\t<CSSTransition\r\n\t\t\t\tkey={item.id}\r\n\t\t\t\tclassNames=\"item\"\r\n\t\t\t\ttimeout={300}\r\n\t\t\t>\r\n\t\t\t\t<Image\r\n\t\t\t\t\tstyle={{flex: `1 1 ${widthInPercent}%`}}\r\n\t\t\t\t\tkey={item.id}\r\n\t\t\t\t\tclassName=\"gallery__image-container\"\r\n\t\t\t\t\tsrc={item.url}\r\n\t\t\t\t\tonLoad={(e) => loadHandler(e, index)}\r\n\t\t\t\t\tonClick={() => dispatch({type: SET_BIG_IMAGE_URL, payload: item.url})}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"image-hover\">\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tonClick={(e) => removeHandler(e, item.id)}\r\n\t\t\t\t\t\t\tclassName=\"image-hover__icon image-hover__close\"\r\n\t\t\t\t\t\t\ticon=\"#close\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Image>\r\n\t\t\t</CSSTransition>\r\n\t\t);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<TransitionGroup className=\"gallery\">\r\n\t\t\t\t{images}\r\n\t\t\t</TransitionGroup>\r\n\r\n\t\t\t{images.length === 0 ? \r\n\t\t\t\t<div className=\"empty\"><span>Здесь будут ваши картинки</span></div> :\r\n\t\t\t\t''\r\n\t\t\t}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Gallery;","import { ADD_SOME_PICTURES, REMOVE_IMAGE, ADD_PICTURE, ADD_PICTURE_SIZE, REMOVE_BIG_IMAGE_URL, SET_BIG_IMAGE_URL } from \"./types\";\r\n\r\nfunction id() {\r\n\treturn '_' + Math.random().toString(36).substr(2, 9);\r\n}\r\n\r\nexport default function(state, action) {\r\n\tlet {images} = state;\r\n\r\n\tswitch (action.type) {\r\n\t\tcase ADD_SOME_PICTURES:\r\n\t\t\tconst arr = action.payload;\r\n\r\n\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\tarr[i].id = id();\r\n\t\t\t\tarr[i].width = arr[i].width || null;\r\n\t\t\t\tarr[i].height = arr[i].height || null;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages: [...state.images, ...arr],\r\n\t\t\t};\r\n\r\n\t\tcase ADD_PICTURE:\r\n\t\t\tconst imageObj = {\r\n\t\t\t\twidth: null,\r\n\t\t\t\theight: null,\r\n\t\t\t\tid: action.payload.id || id(),\r\n\t\t\t\turl: action.payload.url,\r\n\t\t\t};\r\n\r\n\t\t\timages.push(imageObj);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages: [...images],\r\n\t\t\t};\r\n\r\n\t\tcase REMOVE_IMAGE:\r\n\t\t\timages = state.images.filter((item) => item.id !== action.payload);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages\r\n\t\t\t};\r\n\r\n\t\tcase SET_BIG_IMAGE_URL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tbigImageUrl: action.payload\r\n\t\t\t};\r\n\r\n\t\tcase REMOVE_BIG_IMAGE_URL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tbigImageUrl: ''\r\n\t\t\t};\r\n\r\n\t\tcase ADD_PICTURE_SIZE:\r\n\t\t\tconst {index, width, height} = action.payload;\r\n\t\t\timages[index].width = width;\r\n\t\t\timages[index].height = height;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport './Magnify.scss';\r\n\r\nfunction Magnify({src, onClick}) {\r\n\tif (!src) return '';\r\n\r\n\treturn (\r\n\t\t<div onClick={onClick} className=\"magnify\">\r\n\t\t\t<img src={src} className=\"magnify__image\" alt=\"\"/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Magnify;","import React, { useReducer, useEffect } from 'react';\r\nimport Layout from './hoc/Layout/Layout';\r\nimport Loading from './components/Loading/Loading';\r\nimport Gallery from './components/Gallery/Gallery';\r\nimport reducer from './reducer/reducer';\r\nimport { Context } from './context/context';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { REMOVE_BIG_IMAGE_URL, ADD_PICTURE } from './reducer/types';\r\nimport Magnify from './components/Magnify/Magnify';\r\n\r\nfunction App() {\r\n\tconst [state, dispatch] = useReducer(reducer, {\r\n\t\tbigImageUrl: '',\r\n\t\timages: [],\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst preventDefaults = (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t};\r\n\r\n\t\tconst handleDrop = (e) => {\r\n\t\t\tconst dt = e.dataTransfer;\r\n\t\t\tconst files = Array.from(dt.files);\r\n\r\n\t\t\tconst loadFile = (file) => {\r\n\t\t\t\treturn new Promise((res, rej) => {\r\n\t\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\t\treader.readAsDataURL(file);\r\n\r\n\t\t\t\t\treader.onloadend = function() {\r\n\t\t\t\t\t\tdispatch({type: ADD_PICTURE, payload: {url: reader.result}});\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treader.onerror = function(e) {\r\n\t\t\t\t\t\trej(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tfiles.forEach(async (file) => await loadFile(file));\r\n\t\t};\r\n\r\n\t\tconst events = ['dragenter', 'dragover', 'dragleave', 'drop'];\r\n\r\n\t\tevents.forEach(eventName => {\r\n\t\t\tdocument.body.addEventListener(eventName, preventDefaults);\r\n\t\t\tdocument.body.addEventListener('drop', handleDrop);\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tevents.forEach(eventName => {\r\n\t\t\t\tdocument.body.removeEventListener(eventName, preventDefaults);\r\n\t\t\t\tdocument.body.removeEventListener('drop', handleDrop);\r\n\t\t\t});\r\n\t\t}\r\n\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n  return (\r\n\t\t<Context.Provider value={{state, dispatch}}>\r\n\t\t\t<Layout>\r\n\t\t\t\t<Loading />\r\n\t\t\t\t<Gallery />\r\n\t\t\t</Layout>\r\n\t\t\t<Magnify\r\n\t\t\t\tonClick={() => dispatch({type: REMOVE_BIG_IMAGE_URL})}\r\n\t\t\t\tsrc={state.bigImageUrl}\r\n\t\t\t/>\r\n\t\t\t<ToastContainer />\r\n\t\t</Context.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import 'react-app-polyfill/ie11';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './libs/reset.css';\r\nimport './index.scss';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n\t<App />,\r\n\tdocument.getElementById('root')\r\n);\r\n"],"sourceRoot":""}