(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{20:function(e,t,a){e.exports=a(38)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(3),l=a.n(c),i=(a(25),a(26),a(2));a(27);var o=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},t))};a(28),a(29);var u=function(e){var t=e.className,a=void 0===t?null:t,c=e.onChange,l=void 0===c?null:c,o=e.placeholder,u=void 0===o?null:o,s=e.onKeyDown,d=void 0===s?null:s,m=e.value,f=void 0===m?null:m,v=Object(n.useState)(!1),g=Object(i.a)(v,2),E=g[0],p=g[1],h=["input-field__placeholder"];return(E||f)&&h.push("input-field__placeholder_active"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{className:"input ".concat(a),onChange:l,onKeyDown:d,onFocus:function(){p(!0)},onBlur:function(){p(!1)},value:f,type:"text"}),r.a.createElement("span",{className:h.join(" ")},u))},s=a(12),d=r.a.createContext();var m=function(){var e=Object(n.useContext)(d).dispatch,t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],l=a[1],o=function(e){s.b.error(e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};return r.a.createElement("div",{className:"loading"},r.a.createElement(u,{className:"loading__input",placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443",onKeyDown:function(t){if("ENTER"===t.key.toUpperCase()){if(!c)return void o("\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443");l(""),e({type:"ADD_PICTURE",payload:c})}},onChange:function(e){l(e.target.value.trim())},value:c}),r.a.createElement("label",{htmlFor:"upload",className:"loading__label"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),r.a.createElement("input",{type:"file",className:"loading__upload",id:"upload",onChange:function(t){return function(t){var a=t.files[0];if(a)if("application/json"===a.type){var n=new FileReader;n.readAsText(a),n.addEventListener("load",(function(){var t=JSON.parse(n.result);if(t.galleryImages){for(var a=[],r=0;r<t.galleryImages.length;r++){var c=t.galleryImages[r];"string"===typeof c&&(c={url:t.galleryImages[r]}),a.push(c)}e({type:"ADD_SOME_PICTURES",payload:a})}else o("\u041d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 galleryImages!")})),n.addEventListener("error",(function(){o(n.error)}))}else o("\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 - JSON!")}(t.target)}}))},f=a(14),v=a.n(f),g=a(17),E=a(7),p=(a(33),a(1));a(34),a(35);var h=function(){return r.a.createElement("div",{className:"lds-dual-ring"})};var y=function(e){var t=e.className,a=void 0===t?"":t,c=e.src,l=void 0===c?null:c,o=e.style,u=void 0===o?null:o,s=e.children,d=void 0===s?null:s,m=e.onLoad,f=void 0===m?null:m,v=e.onClick,g=void 0===v?null:v,E=e.withLoader,y=void 0===E||E,b=Object(n.useState)(y),_=Object(i.a)(b,2),O=_[0],j=_[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:g,className:"image-container ".concat(a),style:Object(p.a)({cursor:"".concat(g?"pointer":"")},u)},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(l,")")}},r.a.createElement("img",{onLoad:function(e){y&&(j(!1),f&&f(e))},className:"".concat(O?"image__load":"image__hidden"),src:l,alt:""}),d,O?r.a.createElement(h,null):"")))};var b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=t}),[t]),Object(n.useEffect)((function(){if(a&&a.addEventListener){var t=function(e){return r.current(e)};return a.addEventListener(e,t),function(){a.removeEventListener(e,t)}}}),[e,a])};var _=function(e){var t=e.onClick,a=void 0===t?null:t,n=e.className,c=void 0===n?null:n,l=e.style,i=void 0===l?null:l,o=e.icon;return r.a.createElement("div",{onClick:a},r.a.createElement("svg",{className:c,style:i},r.a.createElement("use",{xlinkHref:o})))},O=a(39),j=a(40),I=1,N=1.2,C=1.4,R=1.6,w=1.8;var D=function(){var e=Object(n.useContext)(d),t=e.state,a=e.dispatch,c=Object(n.useState)(I),l=Object(i.a)(c,2),o=l[0],u=l[1],s=Object(n.useCallback)((function(){var e=document.body.clientWidth;e>=860&&o!==I&&u(I),e<860&&e>=705&&o!==N&&u(N),e<705&&e>=550&&o!==C&&u(C),e<550&&e>=435&&o!==R&&u(R),e<435&&o!==w&&u(w)}),[o]);Object(n.useEffect)((function(){s()}),[s]),b("resize",(function(e){s()})),Object(n.useEffect)((function(){var e=function(e){e.preventDefault(),e.stopPropagation()},t=function(e){var t=e.dataTransfer,n=Object(E.a)(t.files),r=function(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e);var c=Math.random();a({type:"ADD_PICTURE",payload:{url:"placeholder",id:c}}),r.onloadend=function(){a({type:"REMOVE_IMAGE",payload:c}),a({type:"ADD_PICTURE",payload:r.result}),t()},r.onerror=function(e){n(e)}}))};n.forEach(function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},n=["dragenter","dragover","dragleave","drop"];return n.forEach((function(a){document.body.addEventListener(a,e),document.body.addEventListener("drop",t)})),function(){n.forEach((function(a){document.body.removeEventListener(a,e),document.body.removeEventListener("drop",t)}))}}),[]);var m=t.images.map((function(e,n){var c=e.width/e.height*20*o;return c||(c=0),r.a.createElement(O.a,{key:e.id,classNames:"item",timeout:300},r.a.createElement(y,{style:{flex:"1 1 ".concat(c,"%")},key:e.id,className:"gallery__image-container",src:e.url,onLoad:function(e){return function(e,n){var r=t.images;null!==r[n].width&&null!==r[n].height||a({type:"ADD_PICTURE_SIZE",payload:{index:n,width:e.target.clientWidth,height:e.target.clientHeight}})}(e,n)},onClick:function(){return a({type:"SET_BIG_IMAGE_URL",payload:e.url})}},r.a.createElement("div",{className:"image-hover"},r.a.createElement(_,{onClick:function(t){return function(e,t){e.stopPropagation(),a({type:"REMOVE_IMAGE",payload:t})}(t,e.id)},className:"image-hover__icon image-hover__close",icon:"#close"}))))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"gallery"},m),0===m.length?r.a.createElement("div",{className:"empty"},r.a.createElement("span",null,"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0432\u0430\u0448\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438")):"")};function k(e){if(!e)return JSON.parse(localStorage.getItem("data"))||null;localStorage.setItem("data",JSON.stringify(e))}function S(){return"_"+Math.random().toString(36).substr(2,9)}var L=function(e,t){var a=e.images;switch(t.type){case"__INIT__":return Object(p.a)(Object(p.a)({},e),k());case"ADD_SOME_PICTURES":for(var n=t.payload,r=0;r<n.length;r++)n[r].id=S(),n[r].width=n[r].width||null,n[r].height=n[r].height||null;return Object(p.a)(Object(p.a)({},e),{},{images:[].concat(Object(E.a)(e.images),Object(E.a)(n))});case"ADD_PICTURE":var c={width:null,height:null,id:t.payload.id||S(),url:t.payload};return a.push(c),Object(p.a)(Object(p.a)({},e),{},{images:Object(E.a)(a)});case"REMOVE_IMAGE":return a=e.images.filter((function(e){return e.id!==t.payload})),Object(p.a)(Object(p.a)({},e),{},{images:a});case"SET_BIG_IMAGE_URL":return Object(p.a)(Object(p.a)({},e),{},{bigImageUrl:t.payload});case"REMOVE_BIG_IMAGE_URL":return Object(p.a)(Object(p.a)({},e),{},{bigImageUrl:""});case"ADD_PICTURE_SIZE":var l=t.payload,i=l.index,o=l.width,u=l.height;return a[i].width=o,a[i].height=u,Object(p.a)(Object(p.a)({},e),{},{images:a});default:return e}};a(36),a(37);var U=function(e){var t=e.src,a=e.onClick;return t?r.a.createElement("div",{onClick:a,className:"magnify"},r.a.createElement("img",{src:t,className:"magnify__image",alt:""})):""};var A=function(){var e=Object(n.useReducer)(L,{bigImageUrl:"",images:[]}),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){c({type:"__INIT__"})}),[]),Object(n.useEffect)((function(){k(a)}),[a]),r.a.createElement(d.Provider,{value:{state:a,dispatch:c}},r.a.createElement(o,null,r.a.createElement(m,null),r.a.createElement(D,null)),r.a.createElement(U,{onClick:function(){return c({type:"REMOVE_BIG_IMAGE_URL"})},src:a.bigImageUrl}),r.a.createElement(s.a,null))};l.a.render(r.a.createElement(A,null),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.42fbcd26.chunk.js.map