(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{136:function(e,t,a){},137:function(e,t,a){},139:function(e,t,a){},140:function(e,t,a){},141:function(e,t,a){},144:function(e,t,a){},145:function(e,t,a){},146:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){"use strict";a.r(t);a(80);var n=a(0),r=a.n(n),l=a(10),c=a.n(l),i=(a(136),a(137),a(51)),o=a.n(i),u=a(76),s=a(6);a(139);var d=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},t))};a(140),a(141);var m=function(e){var t=e.className,a=void 0===t?null:t,l=e.onChange,c=void 0===l?null:l,i=e.placeholder,o=void 0===i?null:i,u=e.onKeyDown,d=void 0===u?null:u,m=e.value,f=void 0===m?null:m,v=Object(n.useState)(!1),g=Object(s.a)(v,2),E=g[0],p=g[1],h=["input-field__placeholder"];return(E||f)&&h.push("input-field__placeholder_active"),r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{className:"input ".concat(a),onChange:c,onKeyDown:d,onFocus:function(){p(!0)},onBlur:function(){p(!1)},value:f,type:"text"}),r.a.createElement("span",{className:h.join(" ")},o))},f=r.a.createContext(),v=a(34),g=function(e){v.b.error(e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};var E=function(){var e=Object(n.useContext)(f).dispatch,t=Object(n.useState)(""),a=Object(s.a)(t,2),l=a[0],c=a[1];return r.a.createElement("div",{className:"loading"},r.a.createElement(m,{className:"loading__input",placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443",onKeyDown:function(t){if("ENTER"===t.key.toUpperCase()){if(!l)return void g("\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443");c(""),e({type:"ADD_PICTURE",payload:l})}},onChange:function(e){c(e.target.value.trim())},value:l}),r.a.createElement("label",{htmlFor:"upload",className:"loading__label"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),r.a.createElement("input",{type:"file",className:"loading__upload",id:"upload",onChange:function(t){return function(t){var a=t.files[0];if(a)if("application/json"===a.type){var n=new FileReader;n.readAsText(a),n.addEventListener("load",(function(){var t=JSON.parse(n.result);if(t.galleryImages){for(var a=[],r=0;r<t.galleryImages.length;r++){var l=t.galleryImages[r];"string"===typeof l&&(l={url:t.galleryImages[r]}),a.push(l)}e({type:"ADD_SOME_PICTURES",payload:a})}else g("\u041d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 galleryImages!")})),n.addEventListener("error",(function(){g(n.error)}))}else g("\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 - JSON!")}(t.target)}}))},p=(a(144),a(2));a(145),a(146);var h=function(){return r.a.createElement("div",{className:"lds-dual-ring"})};var y=function(e){var t=e.className,a=void 0===t?"":t,l=e.src,c=void 0===l?null:l,i=e.style,o=void 0===i?null:i,u=e.children,d=void 0===u?null:u,m=e.onLoad,f=void 0===m?null:m,v=e.onClick,g=void 0===v?null:v,E=e.withLoader,y=void 0===E||E,b=Object(n.useState)(y),_=Object(s.a)(b,2),O=_[0],j=_[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{onClick:g,className:"image-container ".concat(a),style:Object(p.a)({cursor:"".concat(g?"pointer":"")},o)},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(c,")")}},r.a.createElement("img",{onLoad:function(e){y&&(j(!1),f&&f(e))},className:"".concat(O?"image__load":"image__hidden"),src:c,alt:""}),d,O?r.a.createElement(h,null):"")))};var b=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(n.useRef)();Object(n.useEffect)((function(){r.current=t}),[t]),Object(n.useEffect)((function(){if(a&&a.addEventListener){var t=function(e){return r.current(e)};return a.addEventListener(e,t),function(){a.removeEventListener(e,t)}}}),[e,a])};var _=function(e){var t=e.onClick,a=void 0===t?null:t,n=e.className,l=void 0===n?null:n,c=e.style,i=void 0===c?null:c,o=e.icon;return r.a.createElement("div",{onClick:a},r.a.createElement("svg",{className:l,style:i},r.a.createElement("use",{xlinkHref:o})))},O=a(150),j=a(151),I=1,C=1.2,N=1.4,R=1.6,w=1.8;var D=function(){var e=Object(n.useContext)(f),t=e.state,a=e.dispatch,l=Object(n.useState)(I),c=Object(s.a)(l,2),i=c[0],o=c[1],u=Object(n.useCallback)((function(){var e=document.body.clientWidth;e>=860&&i!==I&&o(I),e<860&&e>=705&&i!==C&&o(C),e<705&&e>=550&&i!==N&&o(N),e<550&&e>=435&&i!==R&&o(R),e<435&&i!==w&&o(w)}),[i]);Object(n.useEffect)((function(){u()}),[u]),b("resize",(function(e){u()}));var d=t.images.map((function(e,n){var l=e.width/e.height*20*i;return l||(l=0),r.a.createElement(O.a,{key:e.id,classNames:"item",timeout:300},r.a.createElement(y,{style:{flex:"1 1 ".concat(l,"%")},key:e.id,className:"gallery__image-container",src:e.url,onLoad:function(e){return function(e,n){var r=t.images;null!==r[n].width&&null!==r[n].height||a({type:"ADD_PICTURE_SIZE",payload:{index:n,width:e.target.clientWidth,height:e.target.clientHeight}})}(e,n)},onClick:function(){return a({type:"SET_BIG_IMAGE_URL",payload:e.url})}},r.a.createElement("div",{className:"image-hover"},r.a.createElement(_,{onClick:function(t){return function(e,t){e.stopPropagation(),a({type:"REMOVE_IMAGE",payload:t})}(t,e.id)},className:"image-hover__icon image-hover__close",icon:"#close"}))))}));return r.a.createElement(r.a.Fragment,null,r.a.createElement(j.a,{className:"gallery"},d),0===d.length?r.a.createElement("div",{className:"empty"},r.a.createElement("span",null,"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0432\u0430\u0448\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438")):"")},k=a(36);function A(){return"_"+Math.random().toString(36).substr(2,9)}var L=function(e,t){var a=e.images;switch(t.type){case"ADD_SOME_PICTURES":for(var n=t.payload,r=0;r<n.length;r++)n[r].id=A(),n[r].width=n[r].width||null,n[r].height=n[r].height||null;return Object(p.a)(Object(p.a)({},e),{},{images:[].concat(Object(k.a)(e.images),Object(k.a)(n))});case"ADD_PICTURE":var l={width:null,height:null,id:t.payload.id||A(),url:t.payload};return a.push(l),Object(p.a)(Object(p.a)({},e),{},{images:Object(k.a)(a)});case"REMOVE_IMAGE":return a=e.images.filter((function(e){return e.id!==t.payload})),Object(p.a)(Object(p.a)({},e),{},{images:a});case"SET_BIG_IMAGE_URL":return Object(p.a)(Object(p.a)({},e),{},{bigImageUrl:t.payload});case"REMOVE_BIG_IMAGE_URL":return Object(p.a)(Object(p.a)({},e),{},{bigImageUrl:""});case"ADD_PICTURE_SIZE":var c=t.payload,i=c.index,o=c.width,u=c.height;return a[i].width=o,a[i].height=u,Object(p.a)(Object(p.a)({},e),{},{images:a});default:return e}};a(147),a(148);var U=function(e){var t=e.src,a=e.onClick;return t?r.a.createElement("div",{onClick:a,className:"magnify"},r.a.createElement("img",{src:t,className:"magnify__image",alt:""})):""};var M=function(){var e=Object(n.useReducer)(L,{bigImageUrl:"",images:[]}),t=Object(s.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)((function(){var e=function(e){e.preventDefault(),e.stopPropagation()},t=function(e){var t=e.dataTransfer,a=Array.from(t.files),n=function(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e);var r=Math.random();l({type:"ADD_PICTURE",payload:{url:"placeholder",id:r}}),n.onloadend=function(){l({type:"REMOVE_IMAGE",payload:r}),l({type:"ADD_PICTURE",payload:n.result}),t()},n.onerror=function(e){a(e)}}))};a.forEach(function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},a=["dragenter","dragover","dragleave","drop"];return a.forEach((function(a){document.body.addEventListener(a,e),document.body.addEventListener("drop",t)})),function(){a.forEach((function(a){document.body.removeEventListener(a,e),document.body.removeEventListener("drop",t)}))}}),[]),r.a.createElement(f.Provider,{value:{state:a,dispatch:l}},r.a.createElement(d,null,r.a.createElement(E,null),r.a.createElement(D,null)),r.a.createElement(U,{onClick:function(){return l({type:"REMOVE_BIG_IMAGE_URL"})},src:a.bigImageUrl}),r.a.createElement(v.a,null))};c.a.render(r.a.createElement(M,null),document.getElementById("root"))},79:function(e,t,a){e.exports=a(149)}},[[79,1,2]]]);
//# sourceMappingURL=main.68726e3e.chunk.js.map