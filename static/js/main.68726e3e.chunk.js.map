{"version":3,"sources":["hoc/Layout/Layout.js","components/UI/Input/Input.js","context/context.js","utils/notify.js","components/Loading/Loading.js","reducer/types.js","components/Loader/Loader.js","components/Image/Image.js","hooks/event.hook.js","components/Icon/Icon.js","components/Gallery/Gallery.js","reducer/reducer.js","components/Magnify/Magnify.js","App.js","index.js"],"names":["Layout","children","className","Input","onChange","placeholder","onKeyDown","value","useState","isPlaceholderActive","setIsPlaceholderActive","placeholderCls","push","onFocus","onBlur","type","join","Context","React","createContext","notify","text","toast","error","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","Loading","dispatch","useContext","setValue","e","key","toUpperCase","payload","target","trim","htmlFor","id","input","file","files","reader","FileReader","readAsText","addEventListener","result","JSON","parse","galleryImages","data","i","length","imageObj","url","changeFileHandler","Loader","Image","src","style","onLoad","onClick","withLoader","isLoad","setIsLoad","cursor","backgroundImage","alt","useEventListener","eventName","handler","element","window","savedHandler","useRef","useEffect","current","eventListener","event","removeEventListener","Icon","icon","xlinkHref","k","Gallery","state","coefficient","setCoefficient","resizeHandler","useCallback","width","document","body","clientWidth","images","map","item","index","widthInPercent","height","CSSTransition","classNames","timeout","flex","clientHeight","loadHandler","stopPropagation","removeHandler","TransitionGroup","Math","random","toString","substr","action","arr","filter","bigImageUrl","Magnify","App","useReducer","reducer","preventDefaults","preventDefault","handleDrop","dt","dataTransfer","Array","from","loadFile","Promise","res","rej","readAsDataURL","onloadend","onerror","forEach","a","events","Provider","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.68726e3e.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Layout.scss';\r\n\r\nfunction Layout({children}) {\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t{children}\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Layout;","import React, { useState } from 'react';\r\nimport './Input.scss';\r\n\r\nfunction Input({className = null, onChange = null, placeholder = null, onKeyDown = null, value = null}) {\r\n\tconst [isPlaceholderActive, setIsPlaceholderActive] = useState(false);\r\n\r\n\tconst placeholderCls = [\r\n\t\t'input-field__placeholder'\r\n\t];\r\n\r\n\tif (isPlaceholderActive || value) placeholderCls.push('input-field__placeholder_active');\r\n\r\n\tconst focusHandler = () => {\r\n\t\tsetIsPlaceholderActive(true);\r\n\t};\r\n\r\n\tconst blurHandler = () => {\r\n\t\tsetIsPlaceholderActive(false);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"input-field\">\r\n\t\t\t<input\r\n\t\t\t\tclassName={`input ${className}`}\r\n\t\t\t\tonChange={onChange}\r\n\t\t\t\tonKeyDown={onKeyDown}\r\n\t\t\t\tonFocus={focusHandler}\r\n\t\t\t\tonBlur={blurHandler}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\ttype=\"text\"\r\n\t\t\t/>\r\n\t\t\t<span className={placeholderCls.join(' ')}>{placeholder}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Input;","import React from 'react';\r\n\r\nexport const Context = React.createContext();","import { toast } from 'react-toastify';\r\n\r\nexport const notify = (text) => {\r\n\ttoast.error(text, {\r\n\t\tposition: 'top-right',\r\n\t\tautoClose: 3000,\r\n\t\thideProgressBar: false,\r\n\t\tcloseOnClick: true,\r\n\t\tpauseOnHover: true,\r\n\t\tdraggable: true,\r\n\t\tprogress: undefined,\r\n\t});\r\n};","import React, { useContext, useState } from 'react';\r\nimport './Loading.scss';\r\nimport Input from '../UI/Input/Input';\r\nimport { Context } from '../../context/context';\r\nimport { ADD_SOME_PICTURES, ADD_PICTURE } from '../../reducer/types';\r\nimport { notify } from '../../utils/notify';\r\n\r\nfunction Loading() {\r\n\tconst {dispatch} = useContext(Context);\r\n\tconst [value, setValue] = useState('');\r\n\r\n\tconst changeFileHandler = (input) => {\r\n\t\tlet file = input.files[0];\r\n\r\n\t\tif (!file) return;\r\n\r\n\t\tif (file.type !== 'application/json') {\r\n\t\t\tnotify('Требуемый формат файла - JSON!');\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst reader = new FileReader();\r\n\r\n\t\treader.readAsText(file);\r\n\r\n\t\treader.addEventListener('load', () => {\r\n\t\t\tconst result = JSON.parse(reader.result);\r\n\r\n\t\t\tif (!result.galleryImages) {\r\n\t\t\t\tnotify('Не существует массива galleryImages!');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tconst data = [];\r\n\t\t\tfor (let i = 0; i < result.galleryImages.length; i++) {\r\n\t\t\t\tlet imageObj = result.galleryImages[i];\r\n\r\n\t\t\t\tif (typeof imageObj === 'string') imageObj = {url: result.galleryImages[i]};\r\n\r\n\t\t\t\tdata.push(imageObj);\r\n\t\t\t}\r\n\r\n\t\t\tdispatch({type: ADD_SOME_PICTURES, payload: data});\r\n\t\t});\r\n\r\n\t\treader.addEventListener('error', () => {\r\n\t\t\tnotify(reader.error);\r\n\t\t});\r\n\t};\r\n\r\n\tconst keyDownHandler = (e) => {\r\n\t\tif (e.key.toUpperCase() === 'ENTER') {\r\n\t\t\tif (!value) {\r\n\t\t\t\tnotify('Вставьте ссылку');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tsetValue('');\r\n\t\t\tdispatch({type: ADD_PICTURE, payload: value});\r\n\t\t}\r\n\t};\r\n\r\n\tconst changeInputHandler = (e) => {\r\n\t\tsetValue(e.target.value.trim());\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className=\"loading\">\r\n\t\t\t<Input \r\n\t\t\t\tclassName=\"loading__input\"\r\n\t\t\t\tplaceholder=\"Вставьте ссылку\"\r\n\t\t\t\tonKeyDown={keyDownHandler}\r\n\t\t\t\tonChange={changeInputHandler}\r\n\t\t\t\tvalue={value}\r\n\t\t\t/>\r\n\t\t\t<label htmlFor=\"upload\" className=\"loading__label\">Загрузить</label>\r\n\t\t\t<input\r\n\t\t\t\ttype=\"file\"\r\n\t\t\t\tclassName=\"loading__upload\"\r\n\t\t\t\tid=\"upload\"\r\n\t\t\t\tonChange={(e) => changeFileHandler(e.target)}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Loading;","export const ADD_SOME_PICTURES = 'ADD_SOME_PICTURES';\r\nexport const REMOVE_IMAGE = 'REMOVE_IMAGE';\r\nexport const ADD_PICTURE = 'ADD_PICTURE';\r\nexport const ADD_PICTURE_SIZE = 'ADD_PICTURE_SIZE';\r\nexport const REMOVE_BIG_IMAGE_URL = 'REMOVE_BIG_IMAGE_URL';\r\nexport const SET_BIG_IMAGE_URL = 'SET_BIG_IMAGE_URL';","import React from 'react';\r\nimport './Loader.scss';\r\n\r\nfunction Loader() {\r\n\treturn (\r\n\t\t<div className=\"lds-dual-ring\"></div>\r\n\t);\r\n}\r\n\r\nexport default Loader;","import React, { useState } from 'react';\r\nimport './Image.scss';\r\nimport Loader from '../Loader/Loader';\r\n\r\nfunction Image({\r\n\tclassName = '',\r\n\tsrc = null,\r\n\tstyle = null,\r\n\tchildren = null,\r\n\tonLoad = null,\r\n\tonClick = null,\r\n\twithLoader = true\r\n}) {\r\n\tconst [isLoad, setIsLoad] = useState(withLoader);\r\n\r\n\tconst loadHandler = (e) => {\r\n\t\tif (!withLoader) return;\r\n\t\tsetIsLoad(false);\r\n\t\tif (onLoad) onLoad(e);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\tclassName={`image-container ${className}`}\r\n\t\t\t\tstyle={{cursor: `${onClick ? 'pointer' : ''}`, ...style}}\r\n\t\t\t>\r\n\t\t\t\t<div\r\n\t\t\t\t\tclassName=\"image\"\r\n\t\t\t\t\tstyle={{backgroundImage: `url(${src})`}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<img onLoad={loadHandler} className={`${isLoad ? 'image__load' : 'image__hidden'}`} src={src} alt=\"\"/>\r\n\t\t\t\t\t{children}\r\n\t\t\t\t\t{isLoad ? <Loader/> : ''}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Image;","import {useRef, useEffect} from 'react';\r\n\r\nfunction useEventListener(eventName, handler, element = window) {\r\n  const savedHandler = useRef();\r\n\r\n  useEffect(() => {\r\n    savedHandler.current = handler;\r\n  }, [handler]);\r\n\r\n  useEffect(\r\n    () => {\r\n      const isSupported = element && element.addEventListener;\r\n      if (!isSupported) return;\r\n\r\n      const eventListener = (event) => savedHandler.current(event);\r\n\r\n      element.addEventListener(eventName, eventListener);\r\n\r\n      return () => {\r\n        element.removeEventListener(eventName, eventListener);\r\n      };\r\n    },\r\n    [eventName, element],\r\n  );\r\n}\r\n\r\nexport default useEventListener;","import React from 'react';\r\n\r\nfunction Icon({onClick = null, className = null, style = null, icon}) {\r\n\treturn (\r\n\t\t<div onClick={onClick}>\r\n\t\t\t<svg className={className} style={style}>\r\n\t\t\t\t<use xlinkHref={icon}></use>\r\n\t\t\t</svg>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Icon;","import React, { useContext, useState, useEffect, useCallback } from 'react';\r\nimport './Gallery.scss';\r\nimport Image from '../Image/Image';\r\nimport { Context } from '../../context/context';\r\nimport useEventListener from '../../hooks/event.hook';\r\nimport Icon from '../Icon/Icon';\r\nimport { REMOVE_IMAGE, ADD_PICTURE_SIZE, SET_BIG_IMAGE_URL } from '../../reducer/types';\r\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\r\n\r\nconst k = {\r\n\tbig: 1,\r\n\taboveMedium: 1.2,\r\n\tmedium: 1.4,\r\n\tbelowMedium: 1.6,\r\n\tsmall: 1.8,\r\n};\r\n\r\nfunction Gallery() {\r\n\tconst {state, dispatch} = useContext(Context);\r\n\tconst [coefficient, setCoefficient] = useState(k.big);\r\n\r\n\tconst resizeHandler = useCallback(() => {\r\n\t\tconst width = document.body.clientWidth;\r\n\r\n\t\tif (width >= 860 && coefficient !== k.big) {\r\n\t\t\tsetCoefficient(k.big);\r\n\t\t}\r\n\r\n\t\tif (width < 860 && width >= 705 && coefficient !== k.aboveMedium) {\r\n\t\t\tsetCoefficient(k.aboveMedium);\r\n\t\t}\r\n\r\n\t\tif (width < 705 && width >= 550 && coefficient !== k.medium) {\r\n\t\t\tsetCoefficient(k.medium);\r\n\t\t}\r\n\r\n\t\tif (width < 550 && width >= 435 && coefficient !== k.belowMedium) {\r\n\t\t\tsetCoefficient(k.belowMedium);\r\n\t\t}\r\n\r\n\t\tif (width < 435 && coefficient !== k.small) {\r\n\t\t\tsetCoefficient(k.small);\r\n\t\t}\r\n\t}, [coefficient]);\r\n\r\n\tconst removeHandler = (e, id) => {\r\n\t\te.stopPropagation();\r\n\t\tdispatch({type: REMOVE_IMAGE, payload: id});\r\n\t};\r\n\r\n\tconst loadHandler = (e, index) => {\r\n\t\tconst images = state.images;\r\n\t\tif (images[index].width === null || images[index].height === null) {\r\n\t\t\tdispatch({type: ADD_PICTURE_SIZE, payload: {\r\n\t\t\t\tindex: index,\r\n\t\t\t\twidth: e.target.clientWidth,\r\n\t\t\t\theight: e.target.clientHeight\r\n\t\t\t}});\r\n\t\t}\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tresizeHandler();\r\n\t}, [resizeHandler]);\r\n\r\n\tuseEventListener('resize', (e) => {\r\n\t\tresizeHandler();\r\n\t});\r\n\r\n\tconst images = state.images.map((item, index) => {\r\n\t\tlet widthInPercent = item.width / item.height * 20 * coefficient;\r\n\r\n\t\tif (!widthInPercent) widthInPercent = 0;\r\n\r\n\t\treturn (\r\n\t\t\t<CSSTransition\r\n\t\t\t\tkey={item.id}\r\n\t\t\t\tclassNames=\"item\"\r\n\t\t\t\ttimeout={300}\r\n\t\t\t>\r\n\t\t\t\t<Image\r\n\t\t\t\t\tstyle={{flex: `1 1 ${widthInPercent}%`}}\r\n\t\t\t\t\tkey={item.id}\r\n\t\t\t\t\tclassName=\"gallery__image-container\"\r\n\t\t\t\t\tsrc={item.url}\r\n\t\t\t\t\tonLoad={(e) => loadHandler(e, index)}\r\n\t\t\t\t\tonClick={() => dispatch({type: SET_BIG_IMAGE_URL, payload: item.url})}\r\n\t\t\t\t>\r\n\t\t\t\t\t<div className=\"image-hover\">\r\n\t\t\t\t\t\t<Icon\r\n\t\t\t\t\t\t\tonClick={(e) => removeHandler(e, item.id)}\r\n\t\t\t\t\t\t\tclassName=\"image-hover__icon image-hover__close\"\r\n\t\t\t\t\t\t\ticon=\"#close\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Image>\r\n\t\t\t</CSSTransition>\r\n\t\t);\r\n\t});\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<TransitionGroup className=\"gallery\">\r\n\t\t\t\t{images}\r\n\t\t\t</TransitionGroup>\r\n\r\n\t\t\t{images.length === 0 ? \r\n\t\t\t\t<div className=\"empty\"><span>Здесь будут ваши картинки</span></div> :\r\n\t\t\t\t''\r\n\t\t\t}\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Gallery;","import { ADD_SOME_PICTURES, REMOVE_IMAGE, ADD_PICTURE, ADD_PICTURE_SIZE, REMOVE_BIG_IMAGE_URL, SET_BIG_IMAGE_URL } from \"./types\";\r\n\r\nfunction id() {\r\n\treturn '_' + Math.random().toString(36).substr(2, 9);\r\n}\r\n\r\nexport default function(state, action) {\r\n\tlet {images} = state;\r\n\r\n\tswitch (action.type) {\r\n\t\tcase ADD_SOME_PICTURES:\r\n\t\t\tconst arr = action.payload;\r\n\r\n\t\t\tfor (let i = 0; i < arr.length; i++) {\r\n\t\t\t\tarr[i].id = id();\r\n\t\t\t\tarr[i].width = arr[i].width || null;\r\n\t\t\t\tarr[i].height = arr[i].height || null;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages: [...state.images, ...arr],\r\n\t\t\t};\r\n\r\n\t\tcase ADD_PICTURE:\r\n\t\t\tconst imageObj = {\r\n\t\t\t\twidth: null,\r\n\t\t\t\theight: null,\r\n\t\t\t\tid: action.payload.id || id(),\r\n\t\t\t\turl: action.payload,\r\n\t\t\t};\r\n\r\n\t\t\timages.push(imageObj);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages: [...images],\r\n\t\t\t};\r\n\r\n\t\tcase REMOVE_IMAGE:\r\n\t\t\timages = state.images.filter((item) => item.id !== action.payload);\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages\r\n\t\t\t};\r\n\r\n\t\tcase SET_BIG_IMAGE_URL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tbigImageUrl: action.payload\r\n\t\t\t};\r\n\r\n\t\tcase REMOVE_BIG_IMAGE_URL:\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\tbigImageUrl: ''\r\n\t\t\t};\r\n\r\n\t\tcase ADD_PICTURE_SIZE:\r\n\t\t\tconst {index, width, height} = action.payload;\r\n\t\t\timages[index].width = width;\r\n\t\t\timages[index].height = height;\r\n\r\n\t\t\treturn {\r\n\t\t\t\t...state,\r\n\t\t\t\timages\r\n\t\t\t};\r\n\r\n\t\tdefault:\r\n\t\t\treturn state;\r\n\t}\r\n}","import React from 'react';\r\nimport './Magnify.scss';\r\n\r\nfunction Magnify({src, onClick}) {\r\n\tif (!src) return '';\r\n\r\n\treturn (\r\n\t\t<div onClick={onClick} className=\"magnify\">\r\n\t\t\t<img src={src} className=\"magnify__image\" alt=\"\"/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Magnify;","import React, { useReducer, useEffect } from 'react';\r\nimport Layout from './hoc/Layout/Layout';\r\nimport Loading from './components/Loading/Loading';\r\nimport Gallery from './components/Gallery/Gallery';\r\nimport reducer from './reducer/reducer';\r\nimport { Context } from './context/context';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport { REMOVE_BIG_IMAGE_URL, ADD_PICTURE, REMOVE_IMAGE } from './reducer/types';\r\nimport Magnify from './components/Magnify/Magnify';\r\n\r\nfunction App() {\r\n\tconst [state, dispatch] = useReducer(reducer, {\r\n\t\tbigImageUrl: '',\r\n\t\timages: [],\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\tconst preventDefaults = (e) => {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t};\r\n\r\n\t\tconst handleDrop = (e) => {\r\n\t\t\tconst dt = e.dataTransfer;\r\n\t\t\tconst files = Array.from(dt.files);\r\n\r\n\t\t\tconst loadFile = (file) => {\r\n\t\t\t\treturn new Promise((res, rej) => {\r\n\t\t\t\t\tconst reader = new FileReader();\r\n\t\t\t\t\treader.readAsDataURL(file);\r\n\r\n\t\t\t\t\tconst id = Math.random();\r\n\t\t\t\t\tdispatch({type: ADD_PICTURE, payload: {url: 'placeholder', id}});\r\n\r\n\t\t\t\t\treader.onloadend = function() {\r\n\t\t\t\t\t\tdispatch({type: REMOVE_IMAGE, payload: id});\r\n\t\t\t\t\t\tdispatch({type: ADD_PICTURE, payload: reader.result});\r\n\t\t\t\t\t\tres();\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\treader.onerror = function(e) {\r\n\t\t\t\t\t\trej(e);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t};\r\n\r\n\t\t\tfiles.forEach(async (file) => await loadFile(file));\r\n\t\t};\r\n\r\n\t\tconst events = ['dragenter', 'dragover', 'dragleave', 'drop'];\r\n\r\n\t\tevents.forEach(eventName => {\r\n\t\t\tdocument.body.addEventListener(eventName, preventDefaults);\r\n\t\t\tdocument.body.addEventListener('drop', handleDrop);\r\n\t\t});\r\n\r\n\t\treturn () => {\r\n\t\t\tevents.forEach(eventName => {\r\n\t\t\t\tdocument.body.removeEventListener(eventName, preventDefaults);\r\n\t\t\t\tdocument.body.removeEventListener('drop', handleDrop);\r\n\t\t\t});\r\n\t\t}\r\n\t// eslint-disable-next-line\r\n\t}, []);\r\n\r\n  return (\r\n\t\t<Context.Provider value={{state, dispatch}}>\r\n\t\t\t<Layout>\r\n\t\t\t\t<Loading />\r\n\t\t\t\t<Gallery />\r\n\t\t\t</Layout>\r\n\t\t\t<Magnify\r\n\t\t\t\tonClick={() => dispatch({type: REMOVE_BIG_IMAGE_URL})}\r\n\t\t\t\tsrc={state.bigImageUrl}\r\n\t\t\t/>\r\n\t\t\t<ToastContainer />\r\n\t\t</Context.Provider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import 'react-app-polyfill/ie11';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './libs/reset.css';\r\nimport './index.scss';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n\t<App />,\r\n\tdocument.getElementById('root')\r\n);\r\n"],"sourceRoot":""}