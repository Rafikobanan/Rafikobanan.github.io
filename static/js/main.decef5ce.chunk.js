(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{136:function(e,n,a){},137:function(e,n,a){},138:function(e,n,a){},140:function(e,n,a){},141:function(e,n,a){},144:function(e,n,a){},145:function(e,n,a){},146:function(e,n,a){},147:function(e,n,a){},149:function(e,n,a){"use strict";a.r(n);a(80);var t=a(0),r=a.n(t),l=a(10),c=a.n(l),o=(a(136),a(137),a(6));a(138);var i=function(e){var n=e.children;return r.a.createElement("div",{className:"container"},n)},u=r.a.createContext(),s=a(51),d=a.n(s),m=a(77),v=function(e){e.preventDefault(),e.stopPropagation()},f=function(e,n,a){return new Promise((function(t,r){var l=new FileReader;l.readAsDataURL(e),l.onloadend=function(){n&&n(l.result),t()},l.onerror=function(e){a&&a(e),r(e)}}))};var g=function(e){var n=e.children,a=Object(t.useContext)(u).dispatch;return Object(t.useEffect)((function(){var e=function(e){!function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=e.dataTransfer,r=Array.from(t.files);r.forEach(function(){var e=Object(m.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t,n,a);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}(e,(function(e){a({type:"ADD_PICTURE",payload:{url:e}})}))},n=["dragenter","dragover","dragleave","drop"];return n.forEach((function(n){document.body.addEventListener(n,v),document.body.addEventListener("drop",e)})),function(){n.forEach((function(n){document.body.removeEventListener(n,v),document.body.removeEventListener("drop",e)}))}}),[]),r.a.createElement(r.a.Fragment,null,n)},E=(a(140),function(e){var n=e.className,a=void 0===n?"":n,t=e.onChange,l=void 0===t?null:t,c=e.onFocus,o=void 0===c?null:c,i=e.onBlur,u=void 0===i?null:i,s=e.onKeyDown,d=void 0===s?null:s,m=e.isPlaceholderActive,v=void 0!==m&&m,f=e.placeholder,g=void 0===f?"":f,E=e.value,h=void 0===E?"":E;return r.a.createElement("div",{className:"input-field"},r.a.createElement("input",{className:"input ".concat(a),onChange:l,onKeyDown:d,onFocus:o,onBlur:u,value:h,type:"text"}),r.a.createElement("span",{className:"input-field__placeholder ".concat(v?"input-field__placeholder_active":"")},g))});var h=function(e){var n=Object(t.useState)(!1),a=Object(o.a)(n,2),l=a[0],c=a[1];return r.a.createElement(E,{className:e.className,onChange:e.onChange,placeholder:e.placeholder,onKeyDown:e.onKeyDown,value:e.value,isPlaceholderActive:l,onFocus:function(){c(!0)},onBlur:function(){e.value||c(!1)}})},p=(a(141),function(e){var n=e.onKeyDown,a=void 0===n?null:n,t=e.onChangeTextInput,l=void 0===t?null:t,c=e.onChangeFileInput,o=void 0===c?null:c,i=e.value,u=void 0===i?"":i;return r.a.createElement("div",{className:"loading"},r.a.createElement(h,{className:"loading__input",placeholder:"\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443",onKeyDown:a,onChange:l,value:u}),r.a.createElement("label",{htmlFor:"upload",className:"loading__label"},"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"),r.a.createElement("input",{type:"file",className:"loading__upload",id:"upload",onChange:o}))}),y=a(34),b=function(e){y.b.error(e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})};var O=function(){var e=Object(t.useContext)(u).dispatch,n=Object(t.useState)(""),a=Object(o.a)(n,2),l=a[0],c=a[1];return r.a.createElement(p,{onKeyDown:function(n){if("ENTER"===n.key.toUpperCase()){if(!l)return void b("\u0412\u0441\u0442\u0430\u0432\u044c\u0442\u0435 \u0441\u0441\u044b\u043b\u043a\u0443");c(""),e({type:"ADD_PICTURE",payload:{url:l}})}},onChangeTextInput:function(e){c(e.target.value.trim())},onChangeFileInput:function(n){return function(n){var a=n.files[0];if(a)if("application/json"===a.type){var t=new FileReader;t.readAsText(a),t.addEventListener("load",(function(){var n=JSON.parse(t.result);if(n.galleryImages){for(var a=[],r=0;r<n.galleryImages.length;r++){var l=n.galleryImages[r];"string"===typeof l&&(l={url:n.galleryImages[r]}),a.push(l)}e({type:"ADD_SOME_PICTURES",payload:a})}else b("\u041d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442 \u043c\u0430\u0441\u0441\u0438\u0432\u0430 galleryImages!")})),t.addEventListener("error",(function(){b(t.error)}))}else b("\u0422\u0440\u0435\u0431\u0443\u0435\u043c\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0444\u0430\u0439\u043b\u0430 - JSON!")}(n.target)},value:l})};var _=function(e){var n=e.onClick,a=void 0===n?null:n,t=e.className,l=void 0===t?null:t,c=e.style,o=void 0===c?null:c,i=e.icon;return r.a.createElement("div",{onClick:a},r.a.createElement("svg",{className:l,style:o},r.a.createElement("use",{xlinkHref:i})))};a(144);var C=function(e){var n=e.children,a=void 0===n?null:n,t=e.className,l=void 0===t?"":t;return r.a.createElement("div",{className:"loader ".concat(l)},r.a.createElement("div",{className:"lds-dual-ring"}),a)},j=function(e){var n=e.className,a=void 0===n?"":n,t=e.children,l=void 0===t?null:t,c=e.onLoad,o=void 0===c?null:c,i=e.src,u=void 0===i?"":i;return r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{className:a,children:l}),r.a.createElement("img",{onLoad:o,className:"image-load",src:u,alt:""}))},N=a(2),I=(a(145),function(e){var n=e.className,a=void 0===n?"":n,t=e.onClick,l=void 0===t?null:t,c=e.children,o=void 0===c?null:c,i=e.style,u=void 0===i?{}:i,s=e.src,d=void 0===s?"":s;return r.a.createElement("div",{onClick:l,className:"image-container ".concat(a),style:Object(N.a)({cursor:"".concat(l?"pointer":"")},u)},r.a.createElement("div",{className:"image",style:{backgroundImage:"url(".concat(d,")")}},o))});var w=function(e){var n=Object(t.useState)(!0),a=Object(o.a)(n,2),l=a[0],c=a[1];return l?r.a.createElement(j,{className:e.className,children:e.children,onLoad:function(n){c(!1),e.onLoad&&e.onLoad(n)},src:e.src}):r.a.createElement(I,{className:e.className,onClick:e.onClick,children:e.children,style:e.style,src:e.src})},D=function(e){var n=e.widthInPercent,a=void 0===n?0:n,t=e.url,l=e.onLoad,c=void 0===l?null:l,o=e.onClick,i=void 0===o?null:o,u=e.onRemove,s=void 0===u?null:u;return r.a.createElement(w,{style:{flex:"1 1 ".concat(a,"%")},className:"gallery__image-container",src:t,onLoad:c,onClick:i},r.a.createElement("div",{className:"image-hover"},r.a.createElement(_,{onClick:s,className:"image-hover__icon image-hover__close",icon:"#close"})))},R=(a(146),a(151)),k=function(e){var n=e.images;return r.a.createElement(R.a,{className:"gallery"},n)},L=function(){return r.a.createElement("div",{className:"empty"},r.a.createElement("span",null,"\u0417\u0434\u0435\u0441\u044c \u0431\u0443\u0434\u0443\u0442 \u0432\u0430\u0448\u0438 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438"))};var A=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,r=Object(t.useRef)();Object(t.useEffect)((function(){r.current=n}),[n]),Object(t.useEffect)((function(){if(a&&a.addEventListener){var n=function(e){return r.current(e)};return a.addEventListener(e,n),function(){a.removeEventListener(e,n)}}}),[e,a])},U=1,P=1.2,x=1.4,S=1.6,T=1.8,M=a(150);var F=function(){var e=Object(t.useContext)(u),n=e.state,a=e.dispatch,l=Object(t.useState)(U),c=Object(o.a)(l,2),i=c[0],s=c[1],d=Object(t.useCallback)((function(){var e=function(e){return e>=860?U:e<860&&e>=705?P:e<705&&e>=550?x:e<550&&e>=435?S:e<435?T:null}(document.body.clientWidth);e!==i&&s(e)}),[i]);Object(t.useEffect)((function(){d()}),[d]),A("resize",(function(){d()}));var m=n.images.map((function(e,t){var l=e.width/e.height*20*i;return l&&l!==1/0||(l=0),r.a.createElement(M.a,{classNames:"item",timeout:300,key:e.id},r.a.createElement(D,{widthInPercent:l,url:e.url,onLoad:function(e){return function(e,t){var r=n.images;null!==r[t].width&&null!==r[t].height||a({type:"ADD_PICTURE_SIZE",payload:{index:t,width:e.target.clientWidth,height:e.target.clientHeight}})}(e,t)},onClick:function(){return a({type:"SET_BIG_IMAGE_URL",payload:e.url})},onRemove:function(n){return function(e,n){e.stopPropagation(),a({type:"REMOVE_IMAGE",payload:n})}(n,e.id)}}))}));return m.length?r.a.createElement(k,{images:m}):r.a.createElement(L,null)};a(147);var G=function(e){var n=e.src,a=e.onClick;return n?r.a.createElement("div",{onClick:a,className:"magnify"},r.a.createElement("img",{src:n,className:"magnify__image",alt:""})):""},B=a(36),K=function(){return"_"+Math.random().toString(36).substr(2,9)},J=function(e,n){var a=e.images;switch(n.type){case"ADD_SOME_PICTURES":for(var t=n.payload,r=0;r<t.length;r++)t[r].id=K(),t[r].width=t[r].width||null,t[r].height=t[r].height||null;return Object(N.a)(Object(N.a)({},e),{},{images:[].concat(Object(B.a)(e.images),Object(B.a)(t))});case"ADD_PICTURE":var l={width:null,height:null,id:n.payload.id||K(),url:n.payload.url};return a.push(l),Object(N.a)(Object(N.a)({},e),{},{images:Object(B.a)(a)});case"REMOVE_IMAGE":return a=e.images.filter((function(e){return e.id!==n.payload})),Object(N.a)(Object(N.a)({},e),{},{images:a});case"SET_BIG_IMAGE_URL":return Object(N.a)(Object(N.a)({},e),{},{bigImageUrl:n.payload});case"REMOVE_BIG_IMAGE_URL":return Object(N.a)(Object(N.a)({},e),{},{bigImageUrl:""});case"ADD_PICTURE_SIZE":var c=n.payload,o=c.index,i=c.width,u=c.height;return a[o].width=i,a[o].height=u,Object(N.a)(Object(N.a)({},e),{},{images:a});default:return e}};a(148);var V=function(){var e=Object(t.useReducer)(J,{bigImageUrl:"",images:[]}),n=Object(o.a)(e,2),a=n[0],l=n[1];return r.a.createElement(u.Provider,{value:{state:a,dispatch:l}},r.a.createElement(g,null,r.a.createElement(i,null,r.a.createElement(O,null),r.a.createElement(F,null)),r.a.createElement(G,{onClick:function(){return l({type:"REMOVE_BIG_IMAGE_URL"})},src:a.bigImageUrl}),r.a.createElement(y.a,null)))};c.a.render(r.a.createElement(V,null),document.getElementById("root"))},79:function(e,n,a){e.exports=a(149)}},[[79,1,2]]]);
//# sourceMappingURL=main.decef5ce.chunk.js.map